<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Everything is a Freaking DNS problem | Devops Needs Sushi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/blog/blogapi/rsd/index.html" />
<link rel="alternate" type="application/rss+xml" title="Everything is a Freaking DNS problem RSS" href="/blog/rss/index.xml" />
<link rel="shortcut icon" href="/blog/misc/favicon/index.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/aggregator/aggregator/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/node/node/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/poll/poll/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/system/defaults/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/system/system/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/system/system-menus/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/user/user/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/all/modules/cck/theme/content-module/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/all/modules/date/date/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/all/modules/geshifilter/geshifilter/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/misc/farbtastic/farbtastic/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/all/modules/calendar/calendar/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/all/modules/cck/modules/fieldgroup/fieldgroup/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/all/modules/views/css/views/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/default/themes/barlow/typography/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/default/themes/barlow/layout/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/default/themes/barlow/style/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="print" href="/blog/sites/default/themes/barlow/print/index-2.css?i" />
</head>

<body class="front not-logged-in page-node one-sidebar sidebar-left">
<div id="wrapper">

<div id="header" class="p1">

  <div id="branding">
      <div id="logo">
    <a href="/blog/index/index.html" title="Everything is a Freaking DNS problem" rel="home">
    <img src="/blog/files/me_small/index.jpg" alt="Everything is a Freaking DNS problem" id="logo-image" />
    </a></div>
        <h1><a href="/blog/index/index.html" title="Home" rel="home">Everything is a Freaking DNS problem</a></h1>
        <div class="slogan">Devops Needs Sushi</div>
    </div>

  
  <div class="skip"><a href="#content" title="Skip to site content" accesskey="2">Skip to content</a></div>

  
  <div id="menu">
      </div>
</div>

<div id="content">

  <div id="sidebar-left" class="sidebar">
  <div class="block block-block" id="block-block-5">
  <div class="content"><p>This is the blog where <a href="http://www.krisbuytaert.be/bio.shtml">Kris Buytaert</a> points you to extremely interresting and totally irrelevant stuff that happens in Life , The Universe and Everything</p>
<p>Questions, want to contact me please read my <a href="/blog/faq/index/index.html">FAQ</a> and  <a href="../social/index/index.html">Social Media Policy</a></p>
<p>You can hire me! I work as a consultant for <a href="http://www.inuits.eu/">Inuits.eu</a></p>
</div>
</div>

  </div>

<div id="main">
<div class="content">
<div id="node-930" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-07-31T15:23:56+02:00">
  <span class="month">Jul</span>
  <span class="day">31</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="/blog/rivermuse-rhelcentos-5/index.html">RiverMuse on RHEL/Centos 5</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_480 first"><a href="/blog/taxonomy/term/480/index.html" rel="tag" title="">centos</a></li>
<li class="taxonomy_term_1278 last"><a href="/blog/category/rivermuse/index.html" rel="tag" title="">rivermuse</a></li>
</ul></span>
        </div>
  <div class="content"><p>My yesterday post about RiverMuse only being available on Fedora Core 9 wasn't even cold yet and today Rivermuse already announced the availability of their <a href="http://www.rivermuse.org/static/2009/07/rhel-5-binaries-now-available/" rel="nofollow">RHEL5</a> binaries.</p>
<p>Awesome Open Source !</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-929" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-07-30T22:01:15+02:00">
  <span class="month">Jul</span>
  <span class="day">30</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="/blog/djagios/index.html">Djagios</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1281 first"><a href="/blog/category/djagios/index.html" rel="tag" title="">djagios</a></li>
<li class="taxonomy_term_1021"><a href="/blog/taxonomy/term/1021/index.html" rel="tag" title="">network monitoring</a></li>
<li class="taxonomy_term_1282 last"><a href="/blog/category/open-sourcen/index.html" rel="tag" title="">open sourcen</a></li>
</ul></span>
        </div>
  <div class="content"><p>Probably every day there's a new Open Source project popping up left or right,   sometimes they dissapear quickly , others are here to stay.</p>
<p>Enter <a href="http://djagios.org/" rel="nofollow">Djagios</a>,  a Nagios configuration tool written in Django. At this time it's in development phase but development is going pretty good now, Djagios has been incepted by fellow <a href="http://www.inuits.be/">Inuit </a> <a href="http://sejo.be/" rel="nofollow">Jochen Maes</a></p>
<p>It aims at filling the gap between the vi and emacs Nagios guru's and the manegerial type who just wants to and make Nagios usable for them.</p>
<p>We're already rolling out proof of concept setups of Djagios at different key  customers  so it's definitely here to stay :)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="/blog/djagios/index.html#comments" title="Jump to the first comment of this posting.">3 comments</a></li>
</ul></div>
</div>
<div id="node-928" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-07-30T21:37:34+02:00">
  <span class="month">Jul</span>
  <span class="day">30</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="/blog/rivermuse-first-impressions/index.html">Rivermuse First Impressions</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_890 first"><a href="/blog/taxonomy/term/890/index.html" rel="tag" title="">nagios</a></li>
<li class="taxonomy_term_599"><a href="/blog/taxonomy/term/599/index.html" rel="tag" title="">opensource</a></li>
<li class="taxonomy_term_1278"><a href="/blog/category/rivermuse/index.html" rel="tag" title="">rivermuse</a></li>
<li class="taxonomy_term_887"><a href="/blog/taxonomy/term/887/index.html" rel="tag" title="">zabbix</a></li>
<li class="taxonomy_term_888 last"><a href="/blog/taxonomy/term/888/index.html" rel="tag" title="">zenoss</a></li>
</ul></span>
        </div>
  <div class="content"><p>First of all, I don't come from a Tivoli, OpenView background  , I have never touched the commercial network monitoring tools and  I`m not a network guy . I'm an infrastructure  guy whith a focus on Open Source platforms so I have been using Nagios and more recently Zabbix, Zenoss  etc for the better part of the last 2 decades in large to very large environments.<br />
My syslogs go to a central (r)syslog)-ng) server where I frequently abuse grep.   So If my experience with RiverMuse is not what it should be , there's work to be done on both sides ;) </p>
<p>So When looking at my Rivermuse setup (in a VirtualBox FC9 setup) my first tought is "Those Rivermuse folks will really need to explain me what their tool is all about .. as to me it's just a fancy colortail integrated with snmp traps."</p>
<p>Hopefully it's not just that and it all becomes clear in a couple of days ..  Apart from the FC9 annoyancy there is the  frequent  Unresponsive script errors.</p>
<p><img src="http://www.krisbuytaert.be/images/RiverMuse.png" /></p>
<p>And those I fear will be the real killer problems  for RiverMuse</p>
<p>On the other hand, RiverMuse does good  job in displaying the actual  events in your network and following up the actions that one ... after a while  you'll get a good overview of the actual issues as opposed to all the relevant events</p>
<p>I've dropped RiverMuse into my blade test setup (more on that subject later) and I`ll be keeping a look on what I can learn from it but the dreaded Unresponsive scripts that I know so well from Bamboo really need to be fixed :)</p>
<p>Well time will tell :) </p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="/blog/rivermuse-first-impressions/index.html#comments" title="Jump to the first comment of this posting.">4 comments</a></li>
</ul></div>
</div>
<div id="node-927" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-07-30T21:33:17+02:00">
  <span class="month">Jul</span>
  <span class="day">30</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="/blog/kvm-vs-virtualbox/index.html">KVM vs Virtualbox </a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_506 first"><a href="/blog/taxonomy/term/506/index.html" rel="tag" title="">kvm</a></li>
<li class="taxonomy_term_1280"><a href="/blog/category/novt/index.html" rel="tag" title="">novt</a></li>
<li class="taxonomy_term_1279"><a href="/blog/category/stupidme/index.html" rel="tag" title="">stupidme</a></li>
<li class="taxonomy_term_1046 last"><a href="/blog/taxonomy/term/1046/index.html" rel="tag" title="">virtualbox</a></li>
</ul></span>
        </div>
  <div class="content"><p>So you need that old FC9 instance on your fresh F11 install.</p>
<p>Obviously I started a KVM instance on my desktop and installed FC9 in a Virtual Machine,<br />
It took long to install, too long, so I looked if KVM was working correctly<br />
Kvm was loaded but not in use ..<br />
And then you remember why you had VirtualBox on that machine before it's upgrade .  indeed, this machine was to old it was not a VT Capable machine . VirtualBox performs much better there ..</p>
<p>But you already have a working installed Qemu image.<br />
What do you do ?  Google tells you about vidtool  but all you find are broken links ..</p>
<p>So you look further and you find that you can use VBoxManage for the same functionality</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">VBoxManage convertdd FC9.bin FC0.vdi</div></li></ol></pre></div></p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-926" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-07-30T21:31:51+02:00">
  <span class="month">Jul</span>
  <span class="day">30</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="/blog/rivermuse/index.html">RiverMuse</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1021 first"><a href="/blog/taxonomy/term/1021/index.html" rel="tag" title="">network monitoring</a></li>
<li class="taxonomy_term_461"><a href="/blog/taxonomy/term/461/index.html" rel="tag" title="">open source</a></li>
<li class="taxonomy_term_1278 last"><a href="/blog/category/rivermuse/index.html" rel="tag" title="">rivermuse</a></li>
</ul></span>
        </div>
  <div class="content"><p><a href="http://www.rivermuse.org/" rel="nofollow">Rivermuse</a> is the new Fault Management platform tool on the market, their initial relase was lurking around the corner for a while now but since earlier this week it finally arrived</p>
<p>Eager to see what all the fuzz was about I jumped to their dowload page to find an yum repository for Fedora Core 9, that's right .. it's july 2009 and RiverMuse released their platform for a Linux distribution that got it's  End Of Life notice last month.</p>
<p>On a fresh Fedora 11 box off course you get a zillion dependency mismatches.<br />
So over to the source code.    After installing some build dependencies I managed to build desktop-trunk-8.fc11.noarch.rpm  rivermusece-trunk-8.fc11.noarch.rpm<br />
rpms</p>
<p>However these depend on extremely fresh versions of rsyslog &gt;= 4.1.6 where as Fedora 11 is only on 3.21 and RHEL is even only on 2.0.6.</p>
<p>The initial checkout I had had no README file yet .. so creating a build wasn't really easy ..</p>
<p>In the meanwhile they have promised builds for other versions.</p>
<p>So the battle is between me getting time to setup an FC9 box somehwere and they releasing fresher RPM's .. I hope they win :)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="/blog/rivermuse/index.html#comments" title="Jump to the first comment of this posting.">3 comments</a></li>
</ul></div>
</div>
<div id="node-925" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-07-06T22:47:17+02:00">
  <span class="month">Jul</span>
  <span class="day">06</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="/blog/kvm-or-xen/index.html">KVM or Xen</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_506 first"><a href="/blog/taxonomy/term/506/index.html" rel="tag" title="">kvm</a></li>
<li class="taxonomy_term_470 last"><a href="/blog/taxonomy/term/470/index.html" rel="tag" title="">xen</a></li>
</ul></span>
        </div>
  <div class="content"><p>Over at <a href="http://virtualization.com/guest-posts/2009/07/06/rhel-will-5.4-features-kvm/">Virtualization.com</a> I asked  the crowd what they planned to do when RedHat plans on finally migrating from Xen to KVM ..  you can have your say too . : </p>
<script type="text/javascript" language="javascript" charset="utf-8" src="http://static.polldaddy.com/p/1761790.js"></script><p><noscript><br />
<a href="http://answers.polldaddy.com/poll/1761790/">Will you migrate from Xen to KVM</a><span style="font-size:9px;">(<a href="http://www.polldaddy.com/">poll</a>)</span><br />
</noscript></p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="/blog/kvm-or-xen/index.html#comments" title="Jump to the first comment of this posting.">12 comments</a></li>
</ul></div>
</div>
<div id="node-924" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-07-01T16:08:18+02:00">
  <span class="month">Jul</span>
  <span class="day">01</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="/blog/squashfs-errors-during-fc11-install/index.html">SquashFS errors during FC11 install</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1276 first"><a href="/blog/category/fc11/index.html" rel="tag" title="">fc11</a></li>
<li class="taxonomy_term_1277"><a href="/blog/category/live-install/index.html" rel="tag" title="">live install</a></li>
<li class="taxonomy_term_1275 last"><a href="/blog/category/squashfs/index.html" rel="tag" title="">squashfs</a></li>
</ul></span>
        </div>
  <div class="content"><p>My FC10 to FC11 yum upgrade got stuck on a zillion dependencies .. well actually libssl and mysql from Remi .. but from there it's a whole chain of other things.  So I had the great idea to go for the F11 Live CD,   the LiveCD works like a charm,, only upon trying to install the live CD to my OS partition it started failing on me with a bunch of squashfs errors  ,</p>
<p>It really looks like <a href="https://bugzilla.redhat.com/show_bug.cgi?id=489698" rel="nofollow">this</a> F11Beta blocking issue  which apparently didn't get solved completely after all..  the annoying part is that I can't reproduce the issue anymore .. as my system is now fully working .. maybe on my office desktop next week :)</p>
<p>Oh well.. the full DVD ISO got downloaded and burned and now I can once again enjoy the annoyancies of a freshly installed distro, missing packages, configs that have lightly chaged etc :)   Wonder if sound is working out of the box now :)</p>
<p>Update:  It works .. partly ... (no sound in firefox it seems atm..)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-923" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-07-01T16:07:15+02:00">
  <span class="month">Jul</span>
  <span class="day">01</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="/blog/webbased-administration-interfaces/index.html">Webbased Administration Interfaces</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1270 first"><a href="/blog/category/hp/index.html" rel="tag" title="">HP</a></li>
<li class="taxonomy_term_1271"><a href="/blog/category/ilo/index.html" rel="tag" title="">ILO</a></li>
<li class="taxonomy_term_1272"><a href="/blog/category/kvm/ip/index.html" rel="tag" title="">KVM/IP</a></li>
<li class="taxonomy_term_1274"><a href="/blog/category/ssh/index.html" rel="tag" title="">ssh</a></li>
<li class="taxonomy_term_1273 last"><a href="/blog/category/tunnel/index.html" rel="tag" title="">tunnel</a></li>
</ul></span>
        </div>
  <div class="content"><p>Dear Hardware / Appliance and any other kind of being that creates web interfaces to manage devices remotely.   Pleaze keep in mind that plenty of these kind of machines are being managed from behind a ssh tunnel  so people often connect to them using <a href="http://localhost:8080/" title="http://localhost:8080/" rel="nofollow">http://localhost:8080/</a> where 8080 locally is mapped e.g. via ssh to the port 80 on the remote port.</p>
<p>If your application does anything closely to rewriting the localhost:8080 part to localhost it will fail and I as a potential purchaser of your device wil vote against buying your stuff.<br />
(This is specifically annoying if I want to tunnel 16 KVM/IP boxen to my localhost 8001:8016)</p>
<p>You offcourse score good points for supporting an ssh connection to that same device that allows me to do the everything I actually want to do :)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="/blog/webbased-administration-interfaces/index.html#comments" title="Jump to the first comment of this posting.">2 comments</a></li>
</ul></div>
</div>
<div id="node-922" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-07-01T16:01:57+02:00">
  <span class="month">Jul</span>
  <span class="day">01</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="/blog/drbd2-ocfs2-unexplained-crashes/index.html">DRBD2, OCFS2,  Unexplained crashes</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_899 first"><a href="/blog/taxonomy/term/899/index.html" rel="tag" title="">drbd</a></li>
<li class="taxonomy_term_434"><a href="/blog/taxonomy/term/434/index.html" rel="tag" title="">gfs</a></li>
<li class="taxonomy_term_449"><a href="/blog/taxonomy/term/449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_1268"><a href="/blog/category/iscsi/index.html" rel="tag" title="">iscsi</a></li>
<li class="taxonomy_term_1269"><a href="/blog/category/netconsole/index.html" rel="tag" title="">netconsole</a></li>
<li class="taxonomy_term_1267 last"><a href="/blog/category/ocfs2/index.html" rel="tag" title="">ocfs2</a></li>
</ul></span>
        </div>
  <div class="content"><p>I was trying to setup a dual-primary DRBD environment, with a shared disk with either OCFS2 or GFS.   The environment is a Centos 5.3 with DRBD82 (but also tried with DRBD83 from testing) .</p>
<p>Setting up a single primary disk and running bonnie++ on it worked Setting up a dual-primary disk, only mounting it on one node (ext3) and running bonnie++  worked</p>
<p>When setting up ocfs2 on the /dev/drbd0 disk and mounting it on both nodes, basic functionality seemed in place but usually less than 5-10 minutes after I start bonnie++ as a test on one of the nodes , both nodes power cycle  with no errors in the logfiles, just a crash.</p>
<p>When at the console at the time of crash it looks like a disk IO (you can type , but actions happen)  block happens  then a reboot, no panics, no oops , nothing. ( sysctl panic values set to timeouts etc )<br />
Setting up a dual-primary disk , with ocfs2 only mounting it on one node and starting bonnie++ causes only that node to crash.</p>
<p>On DRBD level I got the following error when that node disappears<br />
<div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">drbd0: PingAck did not arrive in time.</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">drbd0: peer( Primary -&gt; Unknown ) conn( Connected -&gt; NetworkFailure )</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">pdsk(UpToDate -&gt; DUnknown )</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">drbd0: asender terminated</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">drbd0: Terminating asender thread</div></li></ol></pre></div><br />
That however is an expected error because of the reboot.</p>
<p>At first I assumed OCFS2 to be the root of this problem ..so I moved forward and setup an ISCSI target on a 3rd node, and used that device with the same OCFS2 setup. There no crashes occured and bonnie++ flawlessly completed it test run. </p>
<p>So my attention went  back to the combination of DRBD and OCFS<br />
I tried both DRBD 8.2 drbd82-8.2.6-1.el5.centos kmod-drbd82-8.2.6-2  and the 83 variant from Centos Testing</p>
<p>At first I was trying with the ocfs2 1.4.1-1.el5.i386.rpm verson but upgrading to  1.4.2-1.el5.i386.rpm didn't change the behaviour </p>
<p>Both the DRBD as the OCFS mailinglist were fairly supportive pointing me out that it was probably OCFS2 fencing both hosts after missing the heartbeat, and suggested increasing the deathtimetimeout values.</p>
<p>I however wanted to confirm that. As I got no entries in syslog I attached a Cyclades err Avocent Terminal server to the device in the hope that I'd capture the last kernel messsages there ...   no such luck either.</p>
<p>On the OCFS2 mailinlist people pointed out that i'd use netconsole to catch the logs on a remote node<br />
I set up netconsole using</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">modprobe  netconsole netconsole=&quot;@/,@172.16.32.1/&quot;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">sysctl -w kernel.printk=&quot;7 4 1 7&quot;</div></li></ol></pre></div></p>
<p>After which indeed I catched error on my remote host..<br />
<div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">[base-root@CCMT-A ~]# nc -l -u -p 6666</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">(8,0):o2hb_write_timeout:166 ERROR: Heartbeat write timeout to device</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">drbd0 after 478000 milliseconds</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">(8,0):o2hb_stop_all_regions:1873 ERROR: stopping heartbeat on all active</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">regions.</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">ocfs2 is very sorry to be fencing this system by restarting</div></li></ol></pre></div></p>
<p>One'd think that it output over Serial console before it log over the network :)   It doesn't .</p>
<p>Next step is that I`ll start fiddling some more with the timeout values :)  (note the ":)")</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-921" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-06-29T20:53:45+02:00">
  <span class="month">Jun</span>
  <span class="day">29</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="/blog/diaper-needs-service-problem/index.html">Diaper Needs Service Problem</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1266 first"><a href="/blog/category/amber/index.html" rel="tag" title="">amber</a></li>
<li class="taxonomy_term_557"><a href="/blog/taxonomy/term/557/index.html" rel="tag" title="">buytaert</a></li>
<li class="taxonomy_term_451 last"><a href="/blog/taxonomy/term/451/index.html" rel="tag" title="">dns</a></li>
</ul></span>
        </div>
  <div class="content"><p>Last Saturday late, Sandy gave birth to our 2nd daughter<br />
Amber,  pics etc are on <a href="http://www.babietje.be/" rel="nofollow">her own site</a></p>
<p>So we'll be changing diapers of 2 little Buytaert kids for a while ) </p>
<p>PS. Craig from <a href="http://www.oreillygmt.co.uk/" rel="nofollow">O'ReillyGMT</a> gets the credit for inventing the new DNS acronym,</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="/blog/diaper-needs-service-problem/index.html#comments" title="Jump to the first comment of this posting.">8 comments</a></li>
</ul></div>
</div>
<div class="item-list"><ul class="pager"><li class="pager-first first"><a href="index.html" title="Go to first page" class="active">« first</a></li>
<li class="pager-previous"><a href="index17.html?page=17" title="Go to previous page" class="active">‹ previous</a></li>
<li class="pager-ellipsis">…</li>
<li class="pager-item"><a href="index14.html?page=14" title="Go to page 15" class="active">15</a></li>
<li class="pager-item"><a href="index15.html?page=15" title="Go to page 16" class="active">16</a></li>
<li class="pager-item"><a href="index16.html?page=16" title="Go to page 17" class="active">17</a></li>
<li class="pager-item"><a href="index17.html?page=17" title="Go to page 18" class="active">18</a></li>
<li class="pager-current">19</li>
<li class="pager-item"><a href="index19.html?page=19" title="Go to page 20" class="active">20</a></li>
<li class="pager-item"><a href="index20.html?page=20" title="Go to page 21" class="active">21</a></li>
<li class="pager-item"><a href="index21.html?page=21" title="Go to page 22" class="active">22</a></li>
<li class="pager-item"><a href="index22.html?page=22" title="Go to page 23" class="active">23</a></li>
<li class="pager-ellipsis">…</li>
<li class="pager-next"><a href="index19.html?page=19" title="Go to next page" class="active">next ›</a></li>
<li class="pager-last last"><a href="index104.html?page=104" title="Go to last page" class="active">last »</a></li>
</ul></div></div>
</div>

</div>

<div id="footer" class="footer">
  No really .. everything is a funky DNS problem , you'll realise I`m right pretty soon !   
  <p class="credits">Powered by <a href="http://www.drupal.org/">Drupal</a> and the <a href="http://www.drupal.org/project/barlow">Barlow</a> theme by <a href="http://egonbianchet.net/">Egon Bianchet</a>.</p>
</div>

</div>

</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Packaging Drupal Modules  or not ? | Everything is a Freaking DNS problem</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../misc/favicon/index.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/aggregator/aggregator/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/node/node/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/poll/poll/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/cck/theme/content-module/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/date/date/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/geshifilter/geshifilter/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../misc/farbtastic/farbtastic/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/calendar/calendar/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/cck/modules/fieldgroup/fieldgroup/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/default/themes/barlow/typography/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/default/themes/barlow/layout/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/default/themes/barlow/style/index.css?9" />
<link type="text/css" rel="stylesheet" media="print" href="../sites/default/themes/barlow/print/index.css?9" />
</head>

<body class="not-front not-logged-in page-node node-type-blog one-sidebar sidebar-left">
<div id="wrapper">

<div id="header" class="p1">

  <div id="branding">
      <div id="logo">
    <a href="../index/index.html" title="Everything is a Freaking DNS problem" rel="home">
    <img src="../files/me_small/index.jpg" alt="Everything is a Freaking DNS problem" id="logo-image" />
    </a></div>
        <h1><a href="../index/index.html" title="Home" rel="home">Everything is a Freaking DNS problem</a></h1>
        <div class="slogan">Devops Needs Sushi</div>
    </div>

  
  <div class="skip"><a href="#content" title="Skip to site content" accesskey="2">Skip to content</a></div>

  
  <div id="menu">
      </div>
</div>

<div id="content">

  <div id="sidebar-left" class="sidebar">
  <div class="block block-block" id="block-block-5">
  <div class="content"><p>This is the blog where <a href="http://www.krisbuytaert.be/bio.shtml">Kris Buytaert</a> points you to extremely interresting and totally irrelevant stuff that happens in Life , The Universe and Everything</p>
<p>Questions, want to contact me please read my <a href="../faq/index/index.html">FAQ</a> and  <a href="../social/index/index.html">Social Media Policy</a></p>
<p>You can hire me! I work as a consultant for <a href="http://www.inuits.eu/">Inuits.eu</a></p>
</div>
</div>

  </div>

<div id="main">
  <div id="breadcrumb"><div class="breadcrumb"><a href="../index/index.html">Home</a> &#8594; <a href="../blog/index.html">Blogs</a> &#8594; <a href="../blogs/kris-buytaert/index.html">Kris Buytaert&#039;s blog</a></div></div>
  <h2 id="title">Packaging Drupal Modules  or not ?</h2>
<div class="content">
<div id="node-987" class="node  blog">
<div class="content"><p>So <a href="http://bitfieldconsulting.com/puppet-drupal" rel="nofollow">John</a> wrote down his experiences on deploying Drupal sites with Puppet .</p>
<p>It's not a secret that I've been thinking about similar stuff and how I could get to the best possible setup.</p>
<p>John starts of with using Puppet to download Drush... while I want to use <a href="http://repo.inuits.be/centos/5/os/noarch/drush-All-Versions-2.1-1.noarch.rpm" rel="nofollow">rpm</a>  for that ...</p>
<p>I want my core infrastructure to be fully packaged... not downloaded and untarred.  I want to be able to reproduce my platform in a couple of months , with the exact same versions I`m using now .. not with the version that happens to be on ftp.drupal.org at that point in time, or with ftp.drupal.org being down.</p>
<p>Now the next question off course is what's the core infrastructure.<br />
Where does the infrastructure end and does the application start. There's little discussion about having a  puppet created vhost ,  an apache conf.d file, a matching .htaccess file if wanted , and the appropriate settings.php for a multisite drupal config.</p>
<p>There's also little doubt to me on using drush to run the updates, manage the drupal site etc . Reading John's  article made me think some further about what and when I want things packaged. </p>
<p>John's post lead to a discussion on #infra-talk on getting all drupal modules packaged for Centos with <a href="http://www.karan.org/blog/" rel="nofollow">Karan</a> and some others</p>
<p>In a development environment I probably want to have periodic drush updates getting the latest modules from the interwebs and potentially breaking my devs code.   But making sure that when you put a site in production it will be on a fairly up to date platform, and not on the platform you started developing on 24 months ago.</p>
<p>In a production environment however you  only want tested updates of your modules as indeed they will break code.</p>
<p>It's probably going to be a mix and match setup having a local rpm/deb repo with packaged  modules that have been tested and validated in your setup  and using drush to enable  or configure them for that  production setup.</p>
<p>But also having a CI environment wher Drush will get the new modules from the interwebs when needed.  and package them for you.</p>
<p>To me that sounds beter than getting all the available Drupal modules and packaging them, even automated, and preparing a repository of those modules of which only a small percentage will actually be used by people.</p>
<p>But I need to think about it some more :)</p>
</div>
  <div class="meta">
   <div class="submitted">Submitted by Kris Buytaert on Tue, 02/16/2010 - 22:20</div>
     <div class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1371 first"><a href="../category/apt-get/index.html" rel="tag" title="">apt-get</a></li>
<li class="taxonomy_term_480"><a href="../taxonomy/term/480/index.html" rel="tag" title="">centos</a></li>
<li class="taxonomy_term_1328"><a href="../category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_484"><a href="../taxonomy/term/484/index.html" rel="tag" title="">drupal</a></li>
<li class="taxonomy_term_439"><a href="../taxonomy/term/439/index.html" rel="tag" title="">puppet</a></li>
<li class="taxonomy_term_472"><a href="../taxonomy/term/472/index.html" rel="tag" title="">rpm</a></li>
<li class="taxonomy_term_473 last"><a href="../taxonomy/term/473/index.html" rel="tag" title="">yum</a></li>
</ul></div>
     <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
  </div>
</div>
<div id="comments">
  <h2>Comments</h2>
  <a id="comment-3982"></a>
<div id="comment-1" class="comment comment-by-anonymous clear-block">
  <div class="picture">
  <a href="http://www.freistil-consulting.de/" title="View user website." rel="external nofollow"><img src="http://www.gravatar.com/avatar/8ee202e413ff0d0a85f83adf0a35c665.jpg?d=http%3A%2F%2F127.0.0.1%3A8080%2Fblog%2Fsites%2Fall%2Fmodules%2Fgravatar%2Favatar.png&amp;s=85&amp;r=G" alt="Jochen Lillich&#039;s picture" title="Jochen Lillich&#039;s picture"  /></a></div>
<h3>
    <a class="id" href="#comment-3982">#1</a>
    <span class="author"><a href="http://www.freistil-consulting.de/">Jochen Lillich</a></span>  : <span class="title"><a href="index.html#comment-3982" class="active">There&#039;s a better solution</a></span>
  </h3>
  <div class="content"><p>Let's see: You'd like to have different stages of the same code (Drupal core, contrib modules, own modules) which differ in their versions. You'd like to experiment with bleeding edge versions and at the same time have a more conservative approach when it comes to production. You'd also like to reproduce what exact configuration you used last summer before that big relaunch project.</p>
<p>I'd say that that's a classic example for an SCM use case.</p>
<p>My company will soon be offering a Drupal cluster hosting service targeted at websites that need high performance and high availability. And the way we'll deploy the application code is via a distributed SCM software, probably Bazaar or Git.</p>
<p>That way, our customers can manage their code in each lifecycle phase -- development, testing, staging and production. If they want to test new code, they can create a new branch and eventually merge it back into the main branch. They can designate a staging branch that will automatically be deployed unto the staging server. After testing on the staging server, they can push their version unto the production branch which will automatically be deployed on the production cluster nodes.</p>
<p>In conclusion, with SCM, you have all the versioning control you need without sacrificing flexibility to a packaging system.</p>
</div>
        <br class="clear" />
    <div class="submitted">02/21/2010 - 14:57</div>
  </div>
<div class="indented"><a id="comment-3983"></a>
<div id="comment-2" class="comment comment-by-node-author comment-node-author clear-block">
  <div class="picture">
  <img src="http://www.gravatar.com/avatar/70c5686357dd9db5d6f777f6d5624235.jpg?d=http%3A%2F%2F127.0.0.1%3A8080%2Fblog%2Fsites%2Fall%2Fmodules%2Fgravatar%2Favatar.png&amp;s=85&amp;r=G" alt="Kris Buytaert&#039;s picture" title="Kris Buytaert&#039;s picture"  /></div>
<h3>
    <a class="id" href="#comment-3983">#2</a>
    <span class="author">Kris Buytaert</span>  : <span class="title"><a href="index.html#comment-3983" class="active">Only part of a different problem :)</a></span>
  </h3>
  <div class="content"><p>The problem you descibe is both different and only a part of the bigger problem.</p>
<p>First of all.. I`m not trying to have different versions of the same code around,  yes the way I plan on deploying stuff will have as a side benefit that you can do that :) </p>
<p>And secondly your scm based solution only takes into account the code for these modules,  not the external requirements such as vhost config, dns configs,  settings.php and database updates </p>
<p>Obvously all using an scm is an obliged part of the full solution, but it won't solve everything.</p>
</div>
        <br class="clear" />
    <div class="submitted">02/21/2010 - 16:55</div>
  </div>
<div class="indented"><a id="comment-3987"></a>
<div id="comment-3" class="comment comment-by-anonymous clear-block">
  <div class="picture">
  <a href="http://www.freistil-consulting.de/" title="View user website." rel="external nofollow"><img src="http://www.gravatar.com/avatar/8ee202e413ff0d0a85f83adf0a35c665.jpg?d=http%3A%2F%2F127.0.0.1%3A8080%2Fblog%2Fsites%2Fall%2Fmodules%2Fgravatar%2Favatar.png&amp;s=85&amp;r=G" alt="Jochen Lillich&#039;s picture" title="Jochen Lillich&#039;s picture"  /></a></div>
<h3>
    <a class="id" href="#comment-3987">#3</a>
    <span class="author"><a href="http://www.freistil-consulting.de/">Jochen Lillich</a></span>  : <span class="title"><a href="index.html#comment-3987" class="active">Yes, it&#039;s part of a solution</a></span>
  </h3>
  <div class="content"><p>I didn't mean to imply that SCM would solve all configuration management problems. But it should be an integral part of the complete picture. </p>
<p>Other important parts of our infrastructure are the software packages for the system (OS, LAMP) and a configuration automation software like Puppet or Chef (whose configuration again is under version control). By combining those parts and tools, you'll get a highly automated system under tight control.</p>
</div>
        <br class="clear" />
    <div class="submitted">02/23/2010 - 14:21</div>
  </div>
</div></div><a id="comment-3970"></a>
<div id="comment-4" class="comment comment-by-node-author comment-node-author clear-block">
  <div class="picture">
  <img src="http://www.gravatar.com/avatar/70c5686357dd9db5d6f777f6d5624235.jpg?d=http%3A%2F%2F127.0.0.1%3A8080%2Fblog%2Fsites%2Fall%2Fmodules%2Fgravatar%2Favatar.png&amp;s=85&amp;r=G" alt="Kris Buytaert&#039;s picture" title="Kris Buytaert&#039;s picture"  /></div>
<h3>
    <a class="id" href="#comment-3970">#4</a>
    <span class="author">Kris Buytaert</span>  : <span class="title"><a href="index.html#comment-3970" class="active">drupal6, drupal5</a></span>
  </h3>
  <div class="content"><p>One of the suggestions I made when trying to push a drupal 6 forward in EPEL was to have multiple packages isolating the specific versions.</p>
<p>I think you have to agree with me that you don't want different y instances on one machine, certainly not for security reasons.</p>
<p>Doesn't that bring the whole discussion back to using drush mm ?</p>
<p>Or am I overlooking something ?</p>
</div>
        <br class="clear" />
    <div class="submitted">02/17/2010 - 21:29</div>
  </div>
<a id="comment-3968"></a>
<div id="comment-5" class="comment comment-by-anonymous clear-block">
  <div class="picture">
  <a href="http://developmentseed.org/" title="View user website." rel="external nofollow"><img src="http://www.gravatar.com/avatar/5dfc4bc5b7d3d1692460410541abc232.jpg?d=http%3A%2F%2F127.0.0.1%3A8080%2Fblog%2Fsites%2Fall%2Fmodules%2Fgravatar%2Favatar.png&amp;s=85&amp;r=G" alt="adrian&#039;s picture" title="adrian&#039;s picture"  /></a></div>
<h3>
    <a class="id" href="#comment-3968">#5</a>
    <span class="author"><a href="http://developmentseed.org/">adrian</a></span>  : <span class="title"><a href="index.html#comment-3968" class="active">the problem is harder than rpm</a></span>
  </h3>
  <div class="content"><p>because you can have multiple (major and minor) versions of drupal and all it's modules installed at the same time on the platform (ie: var/www/drupal-x.y) level, and then in each of those profiles/$Profilename and sites/$url </p>
<p>rpm and so forth are built to manage a single version of each package installed at the same time, and doesn't do well with what drupal needs.</p>
<p>I was designing the drupal ports collection to take all these issues into account - <a href="http://drupal.org/node/112692" title="http://drupal.org/node/112692" rel="nofollow">http://drupal.org/node/112692</a></p>
</div>
        <br class="clear" />
    <div class="submitted">02/17/2010 - 19:37</div>
  </div>
</div>
</div>
</div>

</div>

<div id="footer" class="footer">
  No really .. everything is a funky DNS problem , you'll realise I`m right pretty soon !   
  <p class="credits">Powered by <a href="http://www.drupal.org/">Drupal</a> and the <a href="http://www.drupal.org/project/barlow">Barlow</a> theme by <a href="http://egonbianchet.net/">Egon Bianchet</a>.</p>
</div>

</div>

</body>
</html>

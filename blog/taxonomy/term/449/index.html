<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>ha | Everything is a Freaking DNS problem</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="alternate" type="application/rss+xml" title="RSS - ha" href="0/feed/index.html" />
<link rel="shortcut icon" href="../../../misc/favicon/index.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/aggregator/aggregator/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/node/node/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/poll/poll/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/defaults/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/system/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/system-menus/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/user/user/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/cck/theme/content-module/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/date/date/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/geshifilter/geshifilter/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../misc/farbtastic/farbtastic/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/calendar/calendar/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/cck/modules/fieldgroup/fieldgroup/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/views/css/views/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/taxonomy/taxonomy/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/typography/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/layout/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/style/index.css?9" />
<link type="text/css" rel="stylesheet" media="print" href="../../../sites/default/themes/barlow/print/index.css?9" />
</head>

<body class="not-front not-logged-in page-taxonomy one-sidebar sidebar-left">
<div id="wrapper">

<div id="header" class="p1">

  <div id="branding">
      <div id="logo">
    <a href="../../../index/index.html" title="Everything is a Freaking DNS problem" rel="home">
    <img src="../../../files/me_small/index.jpg" alt="Everything is a Freaking DNS problem" id="logo-image" />
    </a></div>
        <h1><a href="../../../index/index.html" title="Home" rel="home">Everything is a Freaking DNS problem</a></h1>
        <div class="slogan">Devops Needs Sushi</div>
    </div>

  
  <div class="skip"><a href="#content" title="Skip to site content" accesskey="2">Skip to content</a></div>

  
  <div id="menu">
      </div>
</div>

<div id="content">

  <div id="sidebar-left" class="sidebar">
  <div class="block block-block" id="block-block-5">
  <div class="content"><p>This is the blog where <a href="http://www.krisbuytaert.be/bio.shtml">Kris Buytaert</a> points you to extremely interresting and totally irrelevant stuff that happens in Life , The Universe and Everything</p>
<p>Questions, want to contact me please read my <a href="../../../faq/index/index.html">FAQ</a> and  <a href="../../../social/index/index.html">Social Media Policy</a></p>
<p>You can hire me! I work as a consultant for <a href="http://www.inuits.eu/">Inuits.eu</a></p>
</div>
</div>

  </div>

<div id="main">
  <div id="breadcrumb"><div class="breadcrumb"><a href="../../../index/index.html">Home</a></div></div>
  <h2 id="title">ha</h2>
<div class="content">
<div id="node-1022" class="node teaser blog cal">
    <acronym class="calendar published" title="2010-11-04T00:07:18+01:00">
  <span class="month">Nov</span>
  <span class="day">04</span>
    <span class="year">2010</span>
    </acronym>
    <h2 class="title"><a href="../../../high-availability-mysql-cookbook-review/index.html">High Availability MySQL Cookbook , the review</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1430 first"><a href="../../../category/cobbler/index.html" rel="tag" title="">cobbler</a></li>
<li class="taxonomy_term_899"><a href="../899/index.html" rel="tag" title="">drbd</a></li>
<li class="taxonomy_term_449 active"><a href="index.html" rel="tag" title="" class="active">ha</a></li>
<li class="taxonomy_term_475"><a href="../475/index.html" rel="tag" title="">heartbeat</a></li>
<li class="taxonomy_term_562"><a href="../562/index.html" rel="tag" title="">linux-ha</a></li>
<li class="taxonomy_term_458"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
<li class="taxonomy_term_1336"><a href="../../../category/pacemaker/index.html" rel="tag" title="">pacemaker</a></li>
<li class="taxonomy_term_439 last"><a href="../439/index.html" rel="tag" title="">puppet</a></li>
</ul></span>
        </div>
  <div class="content"><p>When I read on the internetz that Alex Davies was about the publish a <a href="https://www.packtpub.com/high-availability-mysql-cookbook/book" rel="nofollow">Packt book on MySQL HA</a>  I pinged my contacts at Packt and suggested that I'd review the book .</p>
<p>I've ran into <a href="https://sites.google.com/a/davz.net/alex-davies/" rel="nofollow">Alex</a> at some UKUUG conferences before and he's got a solid background on MySQL Cluster and other HA alternatives so I was looking forward to reading the book.</p>
<p>Alex starts of with a couple of indepth chapters on MySQL Cluster,  he does mention that it's not a fit for all problems, but I'd hoped he did it a bit more prominently ...    an upfront chapter outlining the different approaches and when which approach is a match could have been better.    The avid reader now might be 80 pages into MySQL cluster before he realizes it's not going to be a match for his problem.</p>
<p>I really loved the part where Alex correcly mentions that you should probably be using Puppet or so to manage the config files of your environment, rather than scp them around your different boxes ..</p>
<p>Alex then goes on to describe setting up MySQL replication and Multi Master replication with the different approaches one can take here,  he gives some nice tips on using LVM to reduce the downtime of your MySQL when having to transfer the dataset of an already existing MySQL setup, good stuff.</p>
<p>He then goes on to describe MySQL with shared storage ...   if you only mount your redundant sandisk once on your MySQL nodes my preference would probably be a Pacemaker stack  rather than a RedHat Cluster based setup,  but his setup seems to work too.   Alex quickly touches on using GFS to have your data disk mounted simultaneously on both nodes (keep in mind with only 1 active MySQLd)  and then goes on to describe a full DRBD based MySQL HA setup</p>
<p>The last chapter titled Performance tuning gives some very nice tips on both tuning your regular storage, as your<br />
GFS setup but also the tuning parameters for MySQL Cluster</p>
<p>I was also really happy to see the Appendixes on the basic installation where he advocates the use of Cobbler , Kickstart and LVM ..</p>
<p>One of the better books I read the past couple of years .. certainly the best book from Packt so far , I hope there is more quality stuff coming from that direction !</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../high-availability-mysql-cookbook-review/index.html#comments" title="Jump to the first comment of this posting.">4 comments</a></li>
</ul></div>
</div>
<div id="node-1001" class="node teaser blog cal">
    <acronym class="calendar published" title="2010-04-28T23:17:27+02:00">
  <span class="month">Apr</span>
  <span class="day">28</span>
    <span class="year">2010</span>
    </acronym>
    <h2 class="title"><a href="../../../mysql-ha-alternative-approach/index.html">MySQL HA , an alternative approach</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_433 first"><a href="../433/index.html" rel="tag" title="">cluster</a></li>
<li class="taxonomy_term_449 active"><a href="index.html" rel="tag" title="" class="active">ha</a></li>
<li class="taxonomy_term_458 last"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
</ul></span>
        </div>
  <div class="content"><p>For those who've seen my presentation on MySQL HA, you already know that I often use a multimaster setup with a meta OCF resource  that groups my favoured MySQL instance with the service ip ,  using a meta resource means that pacemaker monitors mysql, but it doesn't actually manage it.  It's an approach that works for us.</p>
<p>One of the other approaches I will be looking at soon is the freshly released OCF resource that <a href="http://fghaas.wordpress.com/2010/04/21/mysql-masterslave-support-now-merged-into-linux-ha/" rel="nofollow">Florian</a> announced last week.</p>
<p>Back in the days our approach meant we didn't have to use clone resources, which you might remember being pretty buggy in the v2 era,  not wanting to use clons resources isn't really a valid reason anymore these days .  I've also frequently mentioned the combination of using DRBD and MultiMaster replication,  using this set of OCF resource makes that a lot more easy ..</p>
<p>Now all I need to do is find me some time to validate this setup.</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../mysql-ha-alternative-approach/index.html#comments" title="Jump to the first comment of this posting.">1 comment</a></li>
</ul></div>
</div>
<div id="node-998" class="node teaser blog cal">
    <acronym class="calendar published" title="2010-04-20T21:43:05+02:00">
  <span class="month">Apr</span>
  <span class="day">20</span>
    <span class="year">2010</span>
    </acronym>
    <h2 class="title"><a href="../../../linux-open-administration-days-2010/index.html">Linux Open Administration Days 2010</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1179 first"><a href="../../../category/cfengine/index.html" rel="tag" title="">cfengine</a></li>
<li class="taxonomy_term_1158"><a href="../../../category/chef/index.html" rel="tag" title="">chef</a></li>
<li class="taxonomy_term_455"><a href="../455/index.html" rel="tag" title="">conference</a></li>
<li class="taxonomy_term_1328"><a href="../../../category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_449 active"><a href="index.html" rel="tag" title="" class="active">ha</a></li>
<li class="taxonomy_term_1395"><a href="../../../category/load/index.html" rel="tag" title="">load</a></li>
<li class="taxonomy_term_1386"><a href="../../../category/loadays/index.html" rel="tag" title="">loadays</a></li>
<li class="taxonomy_term_458"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
<li class="taxonomy_term_1394"><a href="../../../category/mysql-ha/index.html" rel="tag" title="">mysql ha</a></li>
<li class="taxonomy_term_439 last"><a href="../439/index.html" rel="tag" title="">puppet</a></li>
</ul></span>
        </div>
  <div class="content"><p>So about 4 monts ago <a href="http://blog.bdesmet.be/?p=272" rel="nofollow">there was the crazy idea</a> to start a new FOSS event in Belgium targeted  at sysadmins.</p>
<p>What started out as an event for local people to meet local people with some local speakers actually ended up being a small local event with some top international speakers on onfiguration mananagement and system administration mixed with a bunch of good local ones !</p>
<p>I had the honour to open the conference with an extremely short version of the Devops talk I gave earlier last year..  extremely short as I knew that over the course of the weekend the topic would reoccur a lot.</p>
<p>We had the first european talk on <a href="http://wiki.opscode.com/display/chef/Home" rel="nofollow">Chef</a>, by Joshua Timberman,  and we had Puppet talks amongst by Dan Bode from Puppetlabs and CFengine talks ,  devops was a frequently dropped word,</p>
<p>We had a book raffle where we handed out O'Reilly's .. we had a great free pizza party (got the idea from the saturday pizza event at LCA 2005) ,  and we had some free beer.      Sounds like a good combination for a geeky weekend.</p>
<p>Apart from the regular talks there were plenty of Open Spaces where interesting topics were discussed ... we had spaces on Open Source vs Open Core , strong voices were heard when we discussed what we should do with the Open Core companies that claim to value Open Source , some people think we should actually list the fauxpensource ones somewhere and make sure the world knows about them</p>
<p>We had an awesome configuration management discussion session  discussing Chef vs Puppet vs CFengine . And much much more ...</p>
<p>Some people owe me plenty of Sushi as I had to do my MySQL HA talk before their Managing MySQL talk  , but other than that .. things just went fine..</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-997" class="node teaser blog cal">
    <acronym class="calendar published" title="2010-04-07T19:16:20+02:00">
  <span class="month">Apr</span>
  <span class="day">07</span>
    <span class="year">2010</span>
    </acronym>
    <h2 class="title"><a href="../../../ukuug-spring-conference-2010/index.html">UKUUG Spring Conference 2010</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_455 first"><a href="../455/index.html" rel="tag" title="">conference</a></li>
<li class="taxonomy_term_1328"><a href="../../../category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_449 active"><a href="index.html" rel="tag" title="" class="active">ha</a></li>
<li class="taxonomy_term_562"><a href="../562/index.html" rel="tag" title="">linux-ha</a></li>
<li class="taxonomy_term_1393"><a href="../../../category/manchester/index.html" rel="tag" title="">manchester</a></li>
<li class="taxonomy_term_458"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
<li class="taxonomy_term_439"><a href="../439/index.html" rel="tag" title="">puppet</a></li>
<li class="taxonomy_term_1392"><a href="../../../category/simon/index.html" rel="tag" title="">simon</a></li>
<li class="taxonomy_term_427 last"><a href="../427/index.html" rel="tag" title="">ukuug</a></li>
</ul></span>
        </div>
  <div class="content"><p>Last week I was in Manchester for the 2010 UKUUG Spring Conference, right .. make that 2 weeks ago , :) </p>
<p>The UKUUG usually hosts the more interesting conferences around ... , it's not just the schedule that attrackts me , yes there's the strong focus towards Larger Scale Unix (and mostly Linux) deployments and how to manage them, but there's also the opportunity to chat in real life with the Devops from across the chunnel.</p>
<p>Spending time with <a href="http://www.devco.net/">R.I.Pienaar</a>, <a href="http://www.build-doctor.com/2010/03/26/ukuug-spring-conference-2010/">Julian Simpson</a>,  <a href="http://twitter.com/simonxwilkinson">Simon Wilkinson</a> , <a href="https://sites.google.com/a/davz.net/alex-davies/">Alex Davies</a> , <a href="http://database-explorer.blogspot.com/">Simon Riggs</a> , Josette, and many others is always fun .</p>
<p>As I was in town early I went to the preconference beer meetup and met with a lot of people and chatted about config management, virtualization   and lots of other stuff ...  after the pub the plan was to go for curries nearby .. and while walking to the , ahem  Bus stop, I managed to recognise <a href="http://monkeyiq.blogspot.com/">Ben Martin</a> from meeting him back ages ago in Hamburg for LinuxKongress , always fun ..</p>
<p>Apart from having to jump on a bus and our group being split at the curry place , rather than being able to tell the latecomers where to walk to and being seeted upstairs with the whole group , the curries were interesting and fun.</p>
<p>As I had been pushing <a href="http://blog.gardeviance.org/">Simon Wardley</a> on Twitter to submit a talk for the conference it was really great to finally see him present ..  His talk was the perfect soft introduction to the conference ...</p>
<p>Simon's talk  was followed   by a talk on Security for the virtual datacenters,  after I questionned the speaker  if anyone actualy uses TPM outside an academic lab the talk suddenly changed into a commercial presentation for a Quack, nuff said.</p>
<p>The Ever energetic <a href="http://www.shadowcat.co.uk/blog/matt-s-trout/">Matt S Trout</a> talked about 21st century perl before Simon "Life is to short for SELinux" Wilkinson talked about his experiences in getting the openAFS crowd  on Git.</p>
<p>Bummer Thierry Carrez didn't show us the real juice of UEC and just the installations of  a Cloud Controller and a Node Controller , but he managed to do so in approx 30 minutes as promised .</p>
<p>A talk titled Coherent and Integrated Configuration of Virtual Infrastructures always cathces my eye.. however when that talk turns out to be a Coherent and Integrated configuration only within the Univerity of Edinborough  (aka lcfg2) talk I`m dissapointed,  specially since it pretty  much didn't introduce any new concepts from the ones I introduced back in  my Durham UKUUG presentation</p>
<p>Luckily Andrew Stribblehill gave a very interesting talk on MySQL scalability,  in which I promised him some answers to his questions for the next day :)</p>
<p>The Conference dinner was without a doubt the best UKUUG dinner so far ,  no typical english "food",  no weird location (Old Trafford, an abandoned warship) , but just a big chinese place and plenty of food !</p>
<p>I started thurday morning in the wrong track,  I assumed to be in the Virtualization track, but I ended up in the Sun thinclient and Abusing Linux to serve weird desktops under the Green computing umbrella track, not my favourites ..</p>
<p>When Patrick and Julian started their Hudson hit my Puppet with a Cucumber talk (which featured some aweseom #devops content) I was a afraid that we'd had to look for a replacment PostgreSQL talk as Simon hadn't arrived yet ..  Luckily he arrived in time for his presentation and he explained us about the new replication features that are slowly making it into PostgreSQL,   one way ... log shipping ...  not really up to par with other alternatives yet :(</p>
<p>So with no further ado .. here's the presentation I gave</p>
<div style="width:425px" id="__ss_3582666"><strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/KrisBuytaert/mysql-ha-with-pacemaker" title="MySQL HA with  PaceMaker">MySQL HA with  PaceMaker</a></strong>
<object width="425" height="355"><param name="movie" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=mysql-pacemaker-100329022737-phpapp01&amp;stripped_title=mysql-ha-with-pacemaker" /><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><embed src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=mysql-pacemaker-100329022737-phpapp01&amp;stripped_title=mysql-ha-with-pacemaker" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="355"></embed></object><div style="padding:5px 0 12px">View more <a href="http://www.slideshare.net/">presentations</a> from <a href="http://www.slideshare.net/KrisBuytaert">Kris Buytaert</a>.</div>
</div>
<p>PS.  If at a Ukuug event and not sure about a person's name ... try Simon.. pretty good chance you're correct :)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../ukuug-spring-conference-2010/index.html#comments" title="Jump to the first comment of this posting.">1 comment</a></li>
</ul></div>
</div>
<div id="node-991" class="node teaser blog cal">
    <acronym class="calendar published" title="2010-03-06T14:03:27+01:00">
  <span class="month">Mar</span>
  <span class="day">06</span>
    <span class="year">2010</span>
    </acronym>
    <h2 class="title"><a href="../../../better-days-arrive-when-dev-meet-ops/index.html">Better days Arrive when Dev Meet Ops</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1328 first"><a href="../../../category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_449 active"><a href="index.html" rel="tag" title="" class="active">ha</a></li>
<li class="taxonomy_term_707"><a href="../707/index.html" rel="tag" title="">krisbuytaert</a></li>
<li class="taxonomy_term_938"><a href="../938/index.html" rel="tag" title="">monitoring</a></li>
<li class="taxonomy_term_599"><a href="../599/index.html" rel="tag" title="">opensource</a></li>
<li class="taxonomy_term_888 last"><a href="../888/index.html" rel="tag" title="">zenoss</a></li>
</ul></span>
        </div>
  <div class="content"><p>A couple of weeks a go <a href="http://twitter.com/LinuxScribe" rel="nofollow">Brian Profitt</a> pinged me for a chat about  Devops ,  the result of that chat , his article can now be found on the Zenoss blog, it's  titled <a href="http://community.zenoss.org/blogs/zenossblog/2010/03/05/datacenter-barometer-better-days-arrive-when-dev-meets-ops" rel="nofollow">Datacenter Barometer: Better days arrive when dev meets ops</a></p>
<p>It's a very nice read with some pointers to places regular readers of my blog should already know ;)<br />
So with lots of leading Open Source infrastructure companies  on different levels, such as config management (OpsCode and Reductive Labs) , monitoring (Zenoss) , deployment (openQRM, RPath, and obviously <a href="http://www.inuits.be/">Consultancy</a> companies  , the upcoming Devops conferences around the planet promise to be a lot of fun ! ;)</p>
<p>Oh, and apparently there is some more on the  story on <a href="http://slashdot.org/submission/1186968/" rel="nofollow">/.</a></p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../better-days-arrive-when-dev-meet-ops/index.html#comments" title="Jump to the first comment of this posting.">1 comment</a></li>
</ul></div>
</div>
<div id="node-967" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-12-04T19:43:27+01:00">
  <span class="month">Dec</span>
  <span class="day">04</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="../../../disabling-dhcp-libvirt-setup/index.html">Disabling DHCP on a LibVirt setup</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1342 first"><a href="../../../category/dhcp/index.html" rel="tag" title="">dhcp</a></li>
<li class="taxonomy_term_449 active"><a href="index.html" rel="tag" title="" class="active">ha</a></li>
<li class="taxonomy_term_506"><a href="../506/index.html" rel="tag" title="">kvm</a></li>
<li class="taxonomy_term_1341"><a href="../../../category/libvirt/index.html" rel="tag" title="">libvirt</a></li>
<li class="taxonomy_term_470 last"><a href="../470/index.html" rel="tag" title="">xen</a></li>
</ul></span>
        </div>
  <div class="content"><p>So you have this libvirt setup and you  want to have a dhcp server on the virtual machines you are playing with , or you want to have all static IP's.</p>
<p>Libvirt uses dnsmasq to provide dhcp services etc and when you  generate a config from the gui it will look like<br />
<div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&lt;network&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">  &lt;name&gt;piponet&lt;/name&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">  &lt;uuid&gt;e87d3bf1-a2e7-96ca-e131-7ae51ac033f9&lt;/uuid&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">  &lt;bridge name='virbr2' stp='on' delay='0' /&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">  &lt;ip address='192.168.100.1' netmask='255.255.255.0'&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">    &lt;dhcp&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">      &lt;range start='192.168.100.128' end='192.168.100.254' /&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">    &lt;/dhcp&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">  &lt;/ip&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&lt;/network&gt;</div></li></ol></pre></div><br />
If you  fully remove the dhcp  section, then restart libvirt you'll notice dnsmasq running with no dhcpd on that subnet so you'll have full control again :)</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&lt;network&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">  &lt;name&gt;piponet&lt;/name&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">  &lt;uuid&gt;e87d3bf1-a2e7-96ca-e131-7ae51ac033f9&lt;/uuid&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">  &lt;bridge name='virbr2' stp='on' delay='0' /&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">  &lt;ip address='192.168.100.1' netmask='255.255.255.0'&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">     &lt;/ip&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&lt;/network&gt;</div></li></ol></pre></div></p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../disabling-dhcp-libvirt-setup/index.html#comments" title="Jump to the first comment of this posting.">1 comment</a></li>
</ul></div>
</div>
<div id="node-960" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-11-18T21:05:47+01:00">
  <span class="month">Nov</span>
  <span class="day">18</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="../../../got-interviewed/index.html">Got Interviewed</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_437 first"><a href="../437/index.html" rel="tag" title="">dnsproblem</a></li>
<li class="taxonomy_term_484"><a href="../484/index.html" rel="tag" title="">drupal</a></li>
<li class="taxonomy_term_449 active"><a href="index.html" rel="tag" title="" class="active">ha</a></li>
<li class="taxonomy_term_475"><a href="../475/index.html" rel="tag" title="">heartbeat</a></li>
<li class="taxonomy_term_562"><a href="../562/index.html" rel="tag" title="">linux-ha</a></li>
<li class="taxonomy_term_458"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
<li class="taxonomy_term_1336"><a href="../../../category/pacemaker/index.html" rel="tag" title="">pacemaker</a></li>
<li class="taxonomy_term_439"><a href="../439/index.html" rel="tag" title="">puppet</a></li>
<li class="taxonomy_term_672"><a href="../672/index.html" rel="tag" title="">virtualization</a></li>
<li class="taxonomy_term_470 last"><a href="../470/index.html" rel="tag" title="">xen</a></li>
</ul></span>
        </div>
  <div class="content"><p>by <a href="http://www.johnmwillis.com/devopsdays/devopsdays-09-interview-with-kris-buytaert/">@botchagalupe</a><br />
on Virtualization, Open Source tools and DNS Problems</p>
<p><embed src="http://blip.tv/play/AYGuxQoC" type="application/xshockwave-flash" width="480" height="390" allowscriptaccess="always" allowfullscreen="true"></embed></p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-958" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-11-12T22:01:43+01:00">
  <span class="month">Nov</span>
  <span class="day">12</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="../../../yet-another-dns-issue/index.html">Yet Another DNS Issue</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_437 first"><a href="../437/index.html" rel="tag" title="">dnsproblem</a></li>
<li class="taxonomy_term_899"><a href="../899/index.html" rel="tag" title="">drbd</a></li>
<li class="taxonomy_term_449 active"><a href="index.html" rel="tag" title="" class="active">ha</a></li>
<li class="taxonomy_term_1335 last"><a href="../../../category/linux-cluster/index.html" rel="tag" title="">linux-cluster</a></li>
</ul></span>
        </div>
  <div class="content"><p>While browsing trough  my enormous mailinglist backlog I ran into the following message from Gianluca Cecchi on the DRBD-user mailing list</p>
<p>guess I`ll have to give Lars a T-Shirt when we next meet ;)</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">From: Gianluca Cecchi</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">To: drbd-user@lists.linbit.com</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Subject: [DRBD-user] notes on 8.3.2</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">- drbdadm create-md r0 segfaults when the command &quot;hostname&quot; on the</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">server contains the fully qualified domain name but you have put only</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">the hostname part in drbd.conf</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Instead, the command &quot;drbdadm dump&quot; correctly gives you a warning in</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">this case (suggesting how to correct the error you made....):</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">suppose complete hostname is virtfed.domainname.com and you put</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">virtfed alone in drbd.conf</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">[root@virtfed ~]# drbdadm dump</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">WARN: no normal resources defined for this host (virtfed.domainname.com)!?</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">while</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">[root@virtfed ~]# drbdadm create-md r0</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Segmentation fault</div></li></ol></pre></div></p>
<p>Guess I`ll have to give the Linbit crowd a T-Shirt when we next meet ;)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../yet-another-dns-issue/index.html#comments" title="Jump to the first comment of this posting.">1 comment</a></li>
</ul></div>
</div>
<div id="node-951" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-10-19T23:46:41+02:00">
  <span class="month">Oct</span>
  <span class="day">19</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="../../../nines-damn-nines-and-more-nines/index.html">Nines , Damn Nines  and More Nines </a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_433 first"><a href="../433/index.html" rel="tag" title="">cluster</a></li>
<li class="taxonomy_term_899"><a href="../899/index.html" rel="tag" title="">drbd</a></li>
<li class="taxonomy_term_449 active"><a href="index.html" rel="tag" title="" class="active">ha</a></li>
<li class="taxonomy_term_562"><a href="../562/index.html" rel="tag" title="">linux-ha</a></li>
<li class="taxonomy_term_458"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
<li class="taxonomy_term_1316 last"><a href="../../../category/nines/index.html" rel="tag" title="">nines</a></li>
</ul></span>
        </div>
  <div class="content"><p>Funny how different experiences lead to different evaluations of tools. The MySQL HA solutions <a href="http://www.mysqlperformanceblog.com/2009/10/16/finding-your-mysql-high-availability-solution-–-the-questions/" rel="nofollow">the MySQL Performanceblog</a> list, are almost listed in the complete opposited order of what  my impressions are.</p>
<p>Ok agreed, I should probably not put my MySQL NDB experiences from 2-3 years ago with multiple Query of deaths and more problems than you into account  anymore ,  but back then went in the list Less stable than a single node.   I've had NDB POC setups going down for much more than 05:16 minutes<br />
Ndb comes with a lot of restrictions, there are</p>
<p>As for MySQL on DRBD, <a href="http://www.krisbuytaert.be/blog/mysql-and-drbd-often-say-no">I've said this before</a> , I love DRBD, but having to wait for a long InnoDB recovery after a failover  just kills your uptime ,<br />
I remember being called by a customer during <a href="http://lefred.be/">Fred</a> last holiday who was waiting over 20 minutes for recovery , twice, so putting the DRBD/San setup second would not be my preference.   But agreed .. it's only listed at 99.9% meaning almost 9 hours of downtime per year are allowed.</p>
<p>On the other hand we've seen database uptime of MySQL MultiMaster setups with Heartbeat reaching better figures than 99.99%  Heck I've seen single nodes  achieve better  than 99.99% :)</p>
<p>So what does this teach us ... there is no golden rule for HA,  lots of situations are different,  it's the preferences of the customer, the size of the database,   the kind of application , and much<br />
more ..  you always need to think and evaluate the environment ...</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../nines-damn-nines-and-more-nines/index.html#comments" title="Jump to the first comment of this posting.">8 comments</a></li>
</ul></div>
</div>
<div id="node-950" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-10-16T20:53:13+02:00">
  <span class="month">Oct</span>
  <span class="day">16</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="../../../heartbeat-2-openais/index.html">Heartbeat 2 OpenAIS</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_449 first active"><a href="index.html" rel="tag" title="" class="active">ha</a></li>
<li class="taxonomy_term_475"><a href="../475/index.html" rel="tag" title="">heartbeat</a></li>
<li class="taxonomy_term_1315"><a href="../../../category/high-availability/index.html" rel="tag" title="">high availability</a></li>
<li class="taxonomy_term_1314 last"><a href="../../../category/openais/index.html" rel="tag" title="">openais</a></li>
</ul></span>
        </div>
  <div class="content"><p>While upgrading a pretty recent Heartbeat cluster to OpenAis earlier today I ran  into the following weird situation<br />
<div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Last updated: Fri Oct 16 08:50:03 2009</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Stack: openais</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Current DC: CO_NMS-1 - partition with quorum</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Version: 1.0.5-462f1569a43740667daf7b0f6b521742e9eb8fa7</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">4 Nodes configured, 2 expected votes</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">1 Resources configured.</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">============</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Online: [ CO_NMS-1 CO_NMS-2 ]</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">OFFLINE: [ co_nms-1 co_nms-2 ]</div></li></ol></pre></div></p>
<p>or <div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">crm(live)node# show</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">co_nms-1(5c48ab4f-767f-e2dc-20ec-5969cddad152): normal</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">co_nms-2(922ff786-eca9-bed0-d79d-8222727a2c5b): normal</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">CO_NMS-1: normal</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">CO_NMS-2: normal</div></li></ol></pre></div></p>
<p>Whohoo.. OpenAIS must have realized I have upperase and lowercase cores :)</p>
<p>Funny to see .. but quickly solved..</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div class="item-list"><ul class="pager"><li class="pager-current first">1</li>
<li class="pager-item"><a href="index1.html?page=1" title="Go to page 2" class="active">2</a></li>
<li class="pager-item"><a href="index2.html?page=2" title="Go to page 3" class="active">3</a></li>
<li class="pager-next"><a href="index1.html?page=1" title="Go to next page" class="active">next ›</a></li>
<li class="pager-last last"><a href="index2.html?page=2" title="Go to last page" class="active">last »</a></li>
</ul></div></div>
</div>

</div>

<div id="footer" class="footer">
  No really .. everything is a funky DNS problem , you'll realise I`m right pretty soon !   
  <p class="credits">Powered by <a href="http://www.drupal.org/">Drupal</a> and the <a href="http://www.drupal.org/project/barlow">Barlow</a> theme by <a href="http://egonbianchet.net/">Egon Bianchet</a>.</p>
</div>

</div>

</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>xen | Everything is a Freaking DNS problem</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="alternate" type="application/rss+xml" title="RSS - xen" href="0/feed/index.html" />
<link rel="shortcut icon" href="../../../misc/favicon/index.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/aggregator/aggregator/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/node/node/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/poll/poll/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/defaults/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/system/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/system-menus/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/user/user/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/cck/theme/content-module/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/date/date/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/geshifilter/geshifilter/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../misc/farbtastic/farbtastic/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/calendar/calendar/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/cck/modules/fieldgroup/fieldgroup/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/views/css/views/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/taxonomy/taxonomy/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/typography/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/layout/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/style/index-2.css?i" />
<link type="text/css" rel="stylesheet" media="print" href="../../../sites/default/themes/barlow/print/index-2.css?i" />
</head>

<body class="not-front not-logged-in page-taxonomy one-sidebar sidebar-left">
<div id="wrapper">

<div id="header" class="p1">

  <div id="branding">
      <div id="logo">
    <a href="../../../index/index.html" title="Everything is a Freaking DNS problem" rel="home">
    <img src="../../../files/me_small/index.jpg" alt="Everything is a Freaking DNS problem" id="logo-image" />
    </a></div>
        <h1><a href="../../../index/index.html" title="Home" rel="home">Everything is a Freaking DNS problem</a></h1>
        <div class="slogan">Devops Needs Sushi</div>
    </div>

  
  <div class="skip"><a href="#content" title="Skip to site content" accesskey="2">Skip to content</a></div>

  
  <div id="menu">
      </div>
</div>

<div id="content">

  <div id="sidebar-left" class="sidebar">
  <div class="block block-block" id="block-block-5">
  <div class="content"><p>This is the blog where <a href="http://www.krisbuytaert.be/bio.shtml">Kris Buytaert</a> points you to extremely interresting and totally irrelevant stuff that happens in Life , The Universe and Everything</p>
<p>Questions, want to contact me please read my <a href="../../../faq/index/index.html">FAQ</a> and  <a href="../../../social/index/index.html">Social Media Policy</a></p>
<p>You can hire me! I work as a consultant for <a href="http://www.inuits.eu/">Inuits.eu</a></p>
</div>
</div>

  </div>

<div id="main">
  <div id="breadcrumb"><div class="breadcrumb"><a href="../../../index/index.html">Home</a></div></div>
  <h2 id="title">xen</h2>
<div class="content">
<div id="node-459" class="node teaser blog cal">
    <acronym class="calendar published" title="2007-10-05T15:46:38+02:00">
  <span class="month">Oct</span>
  <span class="day">05</span>
    <span class="year">2007</span>
    </acronym>
    <h2 class="title"><a href="../../../node/459/index.html">Inuits</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_520 first"><a href="../520/index.html" rel="tag" title="">inuits</a></li>
<li class="taxonomy_term_505"><a href="../505/index.html" rel="tag" title="">qumranet</a></li>
<li class="taxonomy_term_470 last active"><a href="index.html" rel="tag" title="" class="active">xen</a></li>
</ul></span>
        </div>
  <div class="content"><p>Its pretty funny when you announce that you have left your job what kind of ideas people have about your next venture.</p>
<p>The first number of guesses were pretty obvious.  Different people tought I was heading to Xensource,   other people tought I was heading for Qumranet.<br />
Other people tought I was heading to the US.<br />
I'd love to spend some time abroad working in a  different culture so who knows  one day..</p>
<p>But I`m pretty much not moving that far yet<br />
Our new venture is called Inuits.  I write our as there are different  familiar faces at <a href="../www.Inuits/index.html">Inuits</a></p>
<p>Our website isn't ready yet .. we have other priorities.<br />
But as soon as it's ready I`ll let you know </p>
<p>So now you know :)</p>
<p>PS. And for those dissapointed.. yes there is more where this came from :)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-445" class="node teaser blog cal">
    <acronym class="calendar published" title="2007-09-11T20:23:45+02:00">
  <span class="month">Sep</span>
  <span class="day">11</span>
    <span class="year">2007</span>
    </acronym>
    <h2 class="title"><a href="../../../node/445/index.html">Taking over management of a Xen box</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_480 first"><a href="../480/index.html" rel="tag" title="">centos</a></li>
<li class="taxonomy_term_479"><a href="../479/index.html" rel="tag" title="">rhel</a></li>
<li class="taxonomy_term_470 last active"><a href="index.html" rel="tag" title="" class="active">xen</a></li>
</ul></span>
        </div>
  <div class="content"><p>So once in a while you get to take over the management of a machine someone installed with no documentation, with lots of playing around and no clue on how it should be reproducible.  You're pretty sure that if you reboot the machine it won't come up with the right services, or in this case with the right Virtual machines  up and running.</p>
<p>So I got this box with about 7 different xen configs in /etc/xen  and none in /etc/xen/auto .. however different lvm volumes were created and 3 virtual machines were running.   The  different xen configs looked all the same.<br />
web1, web, web.orig, web.working   you know :(</p>
<p>So my challenge was to figure out the config of the running virtual machines<br />
Luckily I bumped into some Redhat articles that tought me virsh dumpxml<br />
Now I`m not really a fan of xml based config but it got me quite far.</p>
<p>Eg. on one of my own machines the output looks pretty good.</p>
<p><xmp><br />
[root@core named]# xm list<br />
Name                                      ID Mem(MiB) VCPUs State   Time(s)<br />
Domain-0                                   0      619     1 r-----   1242.5<br />
web.hs62.be                              1      511     1 -b----   4648.2<br />
[root@core named]# virsh dumpxml 1</xmp></p>
<p><domain type='xen' id='1'><br />
  <name>web.hs62.be</name><br />
  <uuid>f7cb62b9d3aa8a07489604285fe3d842</uuid><br />
  <os><br />
    <type>linux</type><br />
    <kernel>/boot/vmlinuz-2.6-xen</kernel><br />
    <initrd>/boot/initrd-2.6-xen.img</initrd><br />
    <root>/dev/sda1 rw</root><br />
    <cmdline>selinux=0  3</cmdline><br />
  </os><br />
  <memory>524288</memory><br />
  <vcpu>1</vcpu><br />
  <on_poweroff>destroy</on_poweroff><br />
  <on_reboot>restart</on_reboot><br />
  <on_crash>restart</on_crash><br />
  <devices><br />
    <interface type='bridge'><br />
      <source bridge='xenbr0'/><br />
      <mac address='00:16:3e:0a:e8:9b'/></mac></source></interface></devices></domain></p>
<script path='vif-bridge'/>
    
    <disk type='block' device='disk'>
      <driver name='phy'/>
      <source dev='vm_volumes/root-web.hs62.be'/>
      <target dev='sda1'/>
    </target></source></driver></disk>
    <disk type='block' device='disk'>
      <driver name='phy'/>
      <source dev='vm_volumes/tmp-web.hs62.be'/>
      <target dev='sda2'/>
    </target></source></driver></disk>
    <disk type='block' device='disk'>
      <driver name='phy'/>
      <source dev='vm_volumes/usr-web.hs62.be'/>
      <target dev='sda3'/>
    </target></source></driver></disk>
    <disk type='block' device='disk'>
      <driver name='phy'/>
 <source dev='vm_volumes/swap-web.hs62.be'/>
      <target dev='sda4'/>
    </target></source></driver></disk>
    <disk type='block' device='disk'>
      <driver name='phy'/>
      <source dev='vm_volumes/home-web.hs62.be'/>
      <target dev='sda5'/>
    </target></source></driver></disk>
    <console tty='/dev/pts/0'/>
  



Might come handy some day</console></script></div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-443" class="node teaser blog cal">
    <acronym class="calendar published" title="2007-09-06T15:17:43+02:00">
  <span class="month">Sep</span>
  <span class="day">06</span>
    <span class="year">2007</span>
    </acronym>
    <h2 class="title"><a href="../../../node/443/index.html">&quot;Embedded&quot; Xen</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_477 first"><a href="../477/index.html" rel="tag" title="">hypervisor</a></li>
<li class="taxonomy_term_478"><a href="../478/index.html" rel="tag" title="">toldyouso</a></li>
<li class="taxonomy_term_470 last active"><a href="index.html" rel="tag" title="" class="active">xen</a></li>
</ul></span>
        </div>
  <div class="content"><p>Only a month ago I predicted  <a href="http://www.krisbuytaert.be/blog/?q=node/418"><br />
<cite><br />
Xen on Flash ?<br />
Next step, let's kick the bios out.</cite><br />
</a></p>
<p>Today <a href="http://www.xensource.com/PressReleases/Pages/pr090507.aspx" rel="nofollow"> Xen Source Announced</a>  exactly what I predicted.</p>
<p>I can only conclude that indeed Virtualisation as a separate product will be obsolete soon.</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-429" class="node teaser blog cal">
    <acronym class="calendar published" title="2007-08-31T08:36:34+02:00">
  <span class="month">Aug</span>
  <span class="day">31</span>
    <span class="year">2007</span>
    </acronym>
    <h2 class="title"><a href="../../../node/429/index.html">Ganeti</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_433 first"><a href="../433/index.html" rel="tag" title="">cluster</a></li>
<li class="taxonomy_term_469"><a href="../469/index.html" rel="tag" title="">ganeti</a></li>
<li class="taxonomy_term_449"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_470 last active"><a href="index.html" rel="tag" title="" class="active">xen</a></li>
</ul></span>
        </div>
  <div class="content"><p>I already mentionned ganeti before when going over the LinuxConference Europe Schedule<br />
Google just poste the <a href="http://google-code-updates.blogspot.com/2007/08/ganeti-open-source-virtual-server.html" rel="nofollow">news</a> a couple of hours ago and you can go and check out the project on <a href="http://code.google.com/p/ganeti/" rel="nofollow">Google Code</a></p>
<p>Quoting from their site :<br />
<cite><br />
"Ganeti is a virtual server management software tool built on top of Xen virtual machine monitor and other Open Source software.<br />
However, Ganeti requires pre-installed virtualization software on your servers in order to function. Once installed, the tool will take over the management part of the virtual instances (Xen DomU), e.g. disk creation management, operating system installation for these instances (in co-operation with OS-specific install scripts), and startup, shutdown, failover between physical systems. It has been designed to facilitate cluster management of virtual servers and to provide fast and simple recovery after physical failures using commodity hardware. "<br />
</cite></p>
<p>You can use <cite>disk management using either plain LVM volumes, local-disk raid1 mirrors or across-the-network raid1 (using DRBD) for quick recovery in case of physical system failure</cite></p>
<p>I`ll certainly be in the talk next week and I`ll be keeping a look on what happens ..</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-227" class="node teaser story cal">
    <acronym class="calendar published" title="2006-07-17T16:26:18+02:00">
  <span class="month">Jul</span>
  <span class="day">17</span>
    <span class="year">2006</span>
    </acronym>
    <h2 class="title"><a href="../../../high-availability-storage-foundation-sles-10/index.html">High Availability Storage Foundation , on SLES 10</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_449 first"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_623"><a href="../623/index.html" rel="tag" title="">sles</a></li>
<li class="taxonomy_term_470 last active"><a href="index.html" rel="tag" title="" class="active">xen</a></li>
</ul></span>
        </div>
  <div class="content"><p>So last friday I already teased you people by asking what you get if you mix stuff such as OCFS2, iSCSI , Xen and Linux-HA2 , here's the full story .</p>
<p>Guess what.. its all about the  release of SLES 10 and the High Availability Storage Foundation</p>
<p>Last week we sat down with Jo De Baer to dicuss and proofread his document on the Novell High Availability Storage Foundation.<br />
Jo spent a lot of time preparing this document and a fully working setup and we were the happy few actually validating his  document and validating his setup.  Great workshop,  we did find some issues with the setup and some errors in the documents that got fixed in the meanwhile but overall really good work.</p>
<p>The overall concept of the Novell High Availability Storage foundation is to provide a more easy to install package including iSCSI, OCFS2, Hearbeat2 and Xen in SLES10,  Suse did some work in making sure that OCFS2 and Heartbeat2 were working together nicely and in defining Xen as a Heartbeat Resource.</p>
<p>The goal is to create a virtual machine that is actually a cluster resource, so that when there is a problem with it , you just launch another one on another machine.   For this you need to be able to access the same filesystem in order to launch the same virtual machine, and that's where the concept of exporting an loopback image pool over iSCSI with OCFS2 comes in.<br />
Novell is clearly going for disk images., something I don't prefer, I love LVM for this and have always been running into issues with loopback now they have been optimising and bugfixing the  loopback  drivers for both performance  and stability so  at least that argument should be gone in the future.  The idea of being able to move around an image to multiple machines by just copying a file is interresting for testing and playing around,  but it doesn't belong in a managed infrastructure that should survive the 10th floor test. Well, at least they don't recommend using loopback images for your real data, just for the OS.</p>
<p>Anyway.. amongst the problems you run into  when tring to do such a setup is how to integrate ocfs with ha-2<br />
as OCFS2 is a cluster filesystem with it's own membership and heartbeat functions they don't play nice with HA-2 by default, luckily the OCFS2 CMS  is pluggable so you can disable it and give this function to HeartBeat which is exactly how we set it up</p>
<p>The second problem is how do you tell heartbeat that Xen is a resource.   Yes you can shutdown your vm's on one node then restart them on the other manually but then what's the HeartBeat doing,  so you want HeartBeat to do that for you ..<br />
But one can define <a href="http://lists.linux-ha.org/pipermail/linux-ha/2006-March/018798.html">Xen as a HeartBeat resource today</a></p>
<p>Of course this setup isn't really ideal,  I much more prefer having failover between different applications in virtual machines,  those things are already in production today giving you the advantage that you don't have to boot a full machine again before your application is ready hence less downtime,  but still its a nice case that these different technologies really do work together.</p>
<p>Now the next steps in this kind of setups could be adding multiple virtual machines in a resource group and rather than shutting down a machine migrate it to another host based on the definitions of resource groups.</p>
<p>So now that SLES 10 is out , it's no secret anymore what's in there,  I`m not going to document everything further inhere,  Jo did a great job writing a huge  document so that even our Sales guy understood what it was all about  so  I`ll point you to the real juice when Jo  puts it online  :)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="comment_comments first"><a href="../../../high-availability-storage-foundation-sles-10/index.html#comments" title="Jump to the first comment of this posting.">4 comments</a></li>
<li class="node_read_more last"><a href="../../../high-availability-storage-foundation-sles-10/index.html" title="Read the rest of High Availability Storage Foundation , on SLES 10.">Read more</a></li>
</ul></div>
</div>
<div class="item-list"><ul class="pager"><li class="pager-first first"><a href="index.html" title="Go to first page" class="active">« first</a></li>
<li class="pager-previous"><a href="index2.html?page=2" title="Go to previous page" class="active">‹ previous</a></li>
<li class="pager-item"><a href="index.html" title="Go to page 1" class="active">1</a></li>
<li class="pager-item"><a href="index1.html?page=1" title="Go to page 2" class="active">2</a></li>
<li class="pager-item"><a href="index2.html?page=2" title="Go to page 3" class="active">3</a></li>
<li class="pager-current last">4</li>
</ul></div></div>
</div>

</div>

<div id="footer" class="footer">
  No really .. everything is a funky DNS problem , you'll realise I`m right pretty soon !   
  <p class="credits">Powered by <a href="http://www.drupal.org/">Drupal</a> and the <a href="http://www.drupal.org/project/barlow">Barlow</a> theme by <a href="http://egonbianchet.net/">Egon Bianchet</a>.</p>
</div>

</div>

</body>
</html>

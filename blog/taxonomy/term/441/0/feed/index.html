<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xml:base="http://127.0.0.1:8080/blog"  xmlns:dc="http://purl.org/dc/elements/1.1/">
<channel>
 <title>Everything is a Freaking DNS problem - ruby</title>
 <link>http://127.0.0.1:8080/blog/taxonomy/term/441/0</link>
 <description></description>
 <language>en</language>
<item>
 <title>Vagrant &amp; Rubylibs</title>
 <link>http://127.0.0.1:8080/blog/vagrant-rubylibs</link>
 <description>&lt;p&gt;I was testing some MySQL puppet modules on my Vagrant box earlier this week and one of them required augeas.&lt;br /&gt;
I kept running into &quot;Could not find a default provider for augeas&quot;,    however all the appropriate augeas , augeas-lib and ruby-augeas packages were installed.   I inspected the different ruby directories and the  files were perfectly in /usr/lib/ruby/site_ruby/1.8  where I expected them.          &lt;/p&gt;
&lt;p&gt;With all the files seemd to be in the right place,  my next option was to strace a small ruby script that included augeas,  guess what that showed ..       &lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;geshifilter&quot;&gt;&lt;pre class=&quot;text geshifilter-text&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;ol&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/site_ruby/1.8/augeas.rb&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/site_ruby/1.8/augeas.so&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/site_ruby/1.8/i686-linux/augeas.rb&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/site_ruby/1.8/i686-linux/augeas.so&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/site_ruby/augeas.rb&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/site_ruby/augeas.so&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/vendor_ruby/1.8/augeas.rb&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/vendor_ruby/1.8/augeas.so&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/vendor_ruby/1.8/i686-linux/augeas.rb&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/vendor_ruby/1.8/i686-linux/augeas.so&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/vendor_ruby/augeas.rb&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/vendor_ruby/augeas.so&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/1.8/augeas.rb&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/1.8/augeas.so&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/1.8/i686-linux/augeas.rb&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;/opt/ruby/lib/ruby/1.8/i686-linux/augeas.so&amp;quot;, 0xbfd2af1c) = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;./augeas.rb&amp;quot;, 0xbfd2af1c)       = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;stat64(&amp;quot;./augeas.so&amp;quot;, 0xbfd2af1c)       = -1 ENOENT (No such file or directory)&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;Indeed ... vagrant throws the default ruby to /opt/ruby .. and obviously there were no ruby-augeas files in there.&lt;/p&gt;
</description>
 <comments>http://127.0.0.1:8080/blog/vagrant-rubylibs#comments</comments>
 <category domain="http://127.0.0.1:8080/blog/category/ageas">ageas</category>
 <category domain="http://127.0.0.1:8080/blog/category/devops">devops</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/439">puppet</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/441">ruby</category>
 <category domain="http://127.0.0.1:8080/blog/category/vagrant">vagrant</category>
 <pubDate>Tue, 29 Mar 2011 18:11:32 +0000</pubDate>
 <dc:creator>Kris Buytaert</dc:creator>
 <guid isPermaLink="false">1039 at http://127.0.0.1:8080/blog</guid>
</item>
<item>
 <title>24 hours of Puppet Drama</title>
 <link>http://127.0.0.1:8080/blog/24-hours-puppet-drama</link>
 <description>&lt;p&gt;Over the past couple of days I&#039;ve been fighting with a weird puppet problem , we eventually cracked it , but I promised a bunch of you to fully explain it here ;)&lt;/p&gt;
&lt;p&gt;So we were deploying 2 Blade chassis at a pretty remote location with a mix of phyisical and virtual machines, some 48 instances in total.    This is a pretty standard rollout, we&#039;ve got a bunch of similar platforms in our lab , so we knew about a couple of glitches, what to expect etc.&lt;/p&gt;
&lt;p&gt;I was just keeping an eye on the deployment,  looking at the logs seeing if things were running fine, when suddenly a couple of puppet runs didn&#039;t come trough,  we had seen such behaviour before,  usually it&#039;s a matter of running them a gain a couple of times and they will come trough.  (Upgrading ruby and putting passenger in front of puppet actually solved those issues,&lt;br /&gt;
We&#039;d even had a loop built in the platform that runs puppet a couple of times till it returns with the correct exit code just  to make sure. )&lt;/p&gt;
&lt;p&gt;We were first scratching the A chain of our setup, so that in the event of failure we could still bring up the B chain of the platform and be up and running again.   Actually machines were coming up.. slowly .. some of them took a bit longer .  One of the machine&#039;s clock was seriously off ..  the SSL was barfing on it  , so we set the bios clock, and restarted .. it was the machine with 6VM&#039;s   took a while but everything was back on schedule.. then suddenly things were going down fast  more and more puppetruns started failing and .. , at some point in time actually none of our puppet runs were working again .&lt;br /&gt;
I&#039;d see the puppetmaster perfectly compile it&#039;s catalog&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;geshifilter&quot;&gt;&lt;pre class=&quot;text geshifilter-text&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;ol&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;notice: Compiled catalog for ctl-0-a&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;Then the client .. not wanting to get it ..&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;geshifilter&quot;&gt;&lt;pre class=&quot;text geshifilter-text&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;ol&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;Mar  1 11:10:45 ctl-0-a puppet-agent[3674]: Not using expired catalog for ctl-0-a from cache; expired at Tue Mar 01 09:50:06 +0000 2011&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;Mar  1 11:10:45 ctl-0-a puppet-agent[3674]: Using cached catalog&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;Mar  1 11:10:45 ctl-0-a puppet-agent[3674]: Could not retrieve catalog; skipping run&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;We had gone from about 60% of our fresly deployed boxen working fine,  to not one&lt;br /&gt;
So what do you do .. indeed .. you turn on debugging.&lt;br /&gt;
You put both your puppetmaster and client in debug.   Nothing, no errors no nothing ..&lt;/p&gt;
&lt;p&gt;I asked some collegues, asked on irc .. much ideas but none of them that actually cracked the problem.  I did what I knew that solve similar problems before,&lt;/p&gt;
&lt;p&gt;I switched our serialization format from yaml back to pson , and back, no luck.&lt;br /&gt;
I upgraded ruby to a version from the  &lt;a href=&quot;http://yum.glei.ch/&quot; rel=&quot;nofollow&quot;&gt;glei.ch&lt;/a&gt; repository.    No luck.&lt;br /&gt;
I upgraded our Puppet version  2.6  to a version from &lt;a href=&quot;http://tmz.fedorapeople.org/repo/puppet/epel/5/i386/&quot; rel=&quot;nofollow&quot;&gt;the TMZ Epel repo&lt;/a&gt; , we cleaned out ssl the certificates on all sides  multiple times. Cleaned out  /var/lib/puppet  ,  We uninstalled puppet and reinstalled it.&lt;br /&gt;
It wasn&#039;t a DNS Problem&lt;/p&gt;
&lt;p&gt;I had started stripping my manifests to empty runs, those worked,  then started uncommenting the actual manifests again ...  Then in the middle of the debug our VPN connection to the remote location broke down,  we&#039;d only be getting it back in the morning ..about 12 hours later not fun.  Murphy obviously ..&lt;/p&gt;
&lt;p&gt;So the next morning we dived right back in ... making those manifests bigger again,  removing all the stages,  1 or 2 successful runs, then with the same config .. back to failure.   On and off.. successfull and unscussessful.  ... it wasn&#039;t in the manifests ..&lt;/p&gt;
&lt;p&gt;So we decided to roll the puppetmaster back to it&#039;s previous version, that one was known to be stable, there obviously was something really fishy going, so that was the safest bet.&lt;/p&gt;
&lt;p&gt;Wrong,  the machine came up, but it took longer than expected,  and when trying to connect new clients to it .. nothing worked anymore .. same problem as before .. puppetmaster compiles catalog,  clients didn&#039;t get anything.    we started to suspect faulty hardware .. but how could that bee.. the puppetclient looked liked the only malfunctioning thing around .&lt;/p&gt;
&lt;p&gt;Then &lt;a href=&quot;http://twitter.com/#!/dim0&quot; rel=&quot;nofollow&quot;&gt;Dim0&lt;/a&gt; suggested me to look at the that one logfile I hadn&#039;t looked , /var/log/puppet/masterhttp.log    and then we saw it .  it was being flooded with ssl errors,   ssl errors from clients that shouldn&#039;t even be connecting to the puppetmaster at all.&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;geshifilter&quot;&gt;&lt;pre class=&quot;text geshifilter-text&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;ol&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;[2011-03-02 13:32:00] ERROR OpenSSL::SSL::SSLError: tlsv1 alert decrypt error&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:44:in `accept&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:44:in `listen&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/1.8/webrick/server.rb:173:in `call&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/1.8/webrick/server.rb:162:in `start&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/1.8/webrick/server.rb:95:in `start&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/1.8/webrick/server.rb:92:in `each&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/1.8/webrick/server.rb:92:in `start&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/1.8/webrick/server.rb:23:in `start&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/1.8/webrick/server.rb:82:in `start&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:42:in `listen&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:41:in `initialize&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:41:in `new&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:41:in `listen&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/1.8/thread.rb:135:in `synchronize&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/network/http/webrick.rb:38:in `listen&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/network/server.rb:127:in `listen&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/network/server.rb:142:in `start&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/daemon.rb:124:in `start&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:114:in `main&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/application/master.rb:46:in `run_command&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/application.rb:287:in `run&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/application.rb:393:in `exit_on_fail&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/lib/ruby/site_ruby/1.8/puppet/application.rb:287:in `run&#039;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        /usr/sbin/puppetmasterd:4&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;[2011-03-02 13:32:00] ERROR OpenSSL::SSL::SSLError: tlsv1 alert decrypt error&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;What happened was that  &#039;we&#039; decided to bring of the  one backup machines back online, afterall once the slow starting server  came trough, it would be the passive node in the cluster , no worries there, right ?   Wrong,&lt;br /&gt;
This physical machine had 6 virtual machines with old ssl certificates that got stuck in an  loop which was put there to sure their puppetrun came trough correctly at boot time.&lt;/p&gt;
&lt;p&gt;Those 7 rogue clients which generated little to no relevant traffic on the network were saturating the default webrick,   killing them solved the problem and we were back to regular deployment in no time.&lt;/p&gt;
&lt;p&gt;The sad part is that our upcoming release already has passenger , a fresher version of ruby etc .. and that most of the above mentioned errors won&#039;t occur anymore there.&lt;br /&gt;
But in short .. don&#039;t use the default webrick .. it will kill you :)&lt;/p&gt;
&lt;p&gt;And no , not everything is a freaking dns problem, ssl is a big pain in the B too ..  :)&lt;/p&gt;
</description>
 <comments>http://127.0.0.1:8080/blog/24-hours-puppet-drama#comments</comments>
 <category domain="http://127.0.0.1:8080/blog/category/devops">devops</category>
 <category domain="http://127.0.0.1:8080/blog/category/passenger">passenger</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/439">puppet</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/441">ruby</category>
 <category domain="http://127.0.0.1:8080/blog/category/ssl">ssl</category>
 <category domain="http://127.0.0.1:8080/blog/category/webrick">webrick</category>
 <pubDate>Thu, 03 Mar 2011 23:42:45 +0000</pubDate>
 <dc:creator>Kris Buytaert</dc:creator>
 <guid isPermaLink="false">1037 at http://127.0.0.1:8080/blog</guid>
</item>
<item>
 <title>PuppetCamp Europe  2010</title>
 <link>http://127.0.0.1:8080/blog/puppetcamp-europe-2010</link>
 <description>&lt;p&gt;Last week was pretty heavy on conferences for me.  On wednesday I had to give my &lt;a href=&quot;http://www.krisbuytaert.be/blog/building-virtual-apliances&quot;&gt;Building Virtual Appliances&lt;/a&gt; talk at the at the Sizing Server event  on Advanced Virtualization and Hybrid Cloud Computing ,  but the most important part of the week was the first edition of Puppetcamp Europe.&lt;/p&gt;
&lt;p&gt;When the first ideas about PuppetCamp Europe  started  I asked Luke when and where it&#039;d be held.  He replied that I should know as I was supposed to organise it...  I thanked for the honour , he went on to ask &lt;a href=&quot;http://jedi.be/blog/&quot; rel=&quot;nofollow&quot;&gt;Patrick&lt;/a&gt; , he accepted ... I hope I helped him out enough :)    I even handed out a personal invitation to some of the  most famous configuration mgmt people on this planet and &lt;a href=&quot;http://www.inuits.be&quot;&gt;Inuits&lt;/a&gt; sponsored the event too&lt;/p&gt;
&lt;p&gt;Luke started with the opening talk,  talking about the future and past of puppet , about version numbers, 2.6 does sound familiar and stable doesn&#039;t it, about &lt;a href=&quot;http://forge.puppetlabs.com/&quot; rel=&quot;nofollow&quot;&gt;forge.puppetlabs.com&lt;/a&gt;&lt;br /&gt;
During @puppetmasterd &#039;s  talk @kartar played Bugmaster which was great and almost realtime&lt;/p&gt;
&lt;p&gt;The real fun started with the Open Spaces ...  after everybody presented themselves, a mix of usual  suspects, first timers and oldskoolers from irc #puppet that finally got faces,      different sessions were proposed, ranging from Puppet 101, Alternative Puppet Architectures,  Puppet HA,  MultiMaster Puppet to Dating for PuppetMasters  &lt;/p&gt;
&lt;p&gt;Over the 2 days spread the open space different ideas came up on e.g how to scale puppet.    Different people are letting their puppetclients run from cron in batches,  but probably the weirdest idea I heard was to run Puppet in Jruby in order to speed it up.&lt;/p&gt;
&lt;p&gt;Lots of talk on certificates and how to solve the pains with them .. e.g like in a HA setup .. you need to create an authority chain  .. there was also talk about having a&lt;br /&gt;
--trust-my-network   feature that would disable certificates,  Luke was open to accepting such a patch, or a patch that would make the whole certificate setup more pluggable&lt;br /&gt;
That would for sure be a feature a lot of people would want to use ..&lt;/p&gt;
&lt;p&gt;The thurday evening conference dinner was &quot;Stoofvlees met Frieten&quot; for most of us .. but for me it was a London Devops Curry in Gent, with @unixdaemon @ripienaar  and some others ;)       &lt;/p&gt;
&lt;p&gt;But with lots of interesting chatter, free beer and  free icecream  there&#039;s for sure going to be another similar event in Europe next year ..&lt;/p&gt;
</description>
 <comments>http://127.0.0.1:8080/blog/puppetcamp-europe-2010#comments</comments>
 <category domain="http://127.0.0.1:8080/blog/category/configuration-mgmt">configuration mgmt</category>
 <category domain="http://127.0.0.1:8080/blog/category/curry">curry</category>
 <category domain="http://127.0.0.1:8080/blog/category/devops">devops</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/908">ghent</category>
 <category domain="http://127.0.0.1:8080/blog/category/jruby">jruby</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/439">puppet</category>
 <category domain="http://127.0.0.1:8080/blog/category/puppetcamp">puppetcamp</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/441">ruby</category>
 <category domain="http://127.0.0.1:8080/blog/category/zebrastraat">zebrastraat</category>
 <pubDate>Tue, 01 Jun 2010 19:59:41 +0000</pubDate>
 <dc:creator>Kris Buytaert</dc:creator>
 <guid isPermaLink="false">1007 at http://127.0.0.1:8080/blog</guid>
</item>
<item>
 <title>#Devops / Ruby  Meetup  , Antwerp, April 8, 2010</title>
 <link>http://127.0.0.1:8080/blog/devops-ruby-meetup-antwerp-april-8-2010</link>
 <description>&lt;p&gt;&lt;a href=&quot;http://twitter.com/jtimberman&quot; rel=&quot;nofollow&quot;&gt;Joshua Timberman&lt;/a&gt; will be in town, (Antwerpen) that is, for &lt;a href=&quot;http://loadays.org/&quot; rel=&quot;nofollow&quot;&gt;Loadays&lt;/a&gt;  as he is arriving on thursday &lt;a h ref=&quot;http://www.johnmwillis.com/&quot;&gt;Botchagalupe&lt;/a&gt; suggested we should have a Devops / Ruby get together.&lt;/p&gt;
&lt;p&gt;So I&#039;m dutyfully announcing the Devops/Ruby meetup next thursday april 8th, in Antwerp&lt;/p&gt;
&lt;p&gt;The plan is to meet up for beers and chatter in our favourite Antwerp geek pub in , Kulminator , Vleminckveld 32 , Antwerp  , around 20h00 ish..&lt;/p&gt;
&lt;p&gt;Topics will be devops, ruby and much more :)&lt;/p&gt;
&lt;p&gt;No need to register .. just show up ..&lt;/p&gt;
&lt;p&gt;If for some reason the Kulminator is to crowdy, smokey, closedy you should be able to find us next door in the Zeppos :)&lt;/p&gt;
</description>
 <comments>http://127.0.0.1:8080/blog/devops-ruby-meetup-antwerp-april-8-2010#comments</comments>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/492">antwerp</category>
 <category domain="http://127.0.0.1:8080/blog/category/beer">beer</category>
 <category domain="http://127.0.0.1:8080/blog/category/chef">chef</category>
 <category domain="http://127.0.0.1:8080/blog/category/devops">devops</category>
 <category domain="http://127.0.0.1:8080/blog/category/meetup">meetup</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/441">ruby</category>
 <pubDate>Tue, 30 Mar 2010 20:57:34 +0000</pubDate>
 <dc:creator>Kris Buytaert</dc:creator>
 <guid isPermaLink="false">994 at http://127.0.0.1:8080/blog</guid>
</item>
<item>
 <title>Juliux End of Life Announcement</title>
 <link>http://127.0.0.1:8080/blog/node/436</link>
 <description>&lt;p&gt;Raf posted the Juliux End Of Life announcement a couple of days ago, &lt;a href=&quot;http://www.x-tend.be/pipermail/juliux-dev/2007-August.txt&quot; title=&quot;http://www.x-tend.be/pipermail/juliux-dev/2007-August.txt&quot; rel=&quot;nofollow&quot;&gt;http://www.x-tend.be/pipermail/juliux-dev/2007-August.txt&lt;/a&gt;&lt;br /&gt;
We started Juliux about 2 years ago with as idea to create an open source alternative for  the back then proprietary RedHat Satelite and the back then totally broken ZLM from Novell. We set out to build a webbased platform from where you could do package management for a hybrid set of servers, with as a second version target to also integrate some form of configuration management.  We even presented our proof of Concept at the 2006 UKUUG Lisa Conference&lt;/p&gt;
&lt;p&gt;RedHat in the meanwhile announced open sourceing Satellite,  but more importantly Puppet became more popular and more feature rich.&lt;br /&gt;
One of the  features that came in puppet that made me rethink Juliux was the fact that you could do package management including installation etc within Juliux,  so I started thinking about making Juliux a webfrontend that used Puppet as a back end.&lt;/p&gt;
&lt;p&gt;The ideas were good, but we really didn&#039;t have time to focus on developing the things we wanted to write.  So when I ran into &lt;a href=&quot;http://reductivelabs.com/projects/puppet/documentation/rails-puppet-manager&quot; rel=&quot;nofollow&quot;&gt;PuppetShow&lt;/a&gt; the time was right to refocus the little efforts we were spending and as Raf announced he now will be working on PuppetShow when he has time.&lt;/p&gt;
&lt;p&gt;Funny . there was a time when I was thinking about rebranding Julux to PuppetMaster,  or Master of Puppets,  but I actually like PuppetShow better .. So we had similar ideas , only Luke had more time to implement his ideas .    &lt;/p&gt;
&lt;p&gt;Time often is an issue in opensource development.  There&#039;s lots of stuff that I have in my head that could easily be written .. but I don&#039;t always have time to do it myselve or other people available that can write it for me .. :(  Well.. maybe one day :)&lt;/p&gt;
</description>
 <comments>http://127.0.0.1:8080/blog/node/436#comments</comments>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/440">configuration management</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/442">juliux</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/439">puppet</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/441">ruby</category>
 <pubDate>Sun, 02 Sep 2007 17:11:24 +0000</pubDate>
 <dc:creator>Kris Buytaert</dc:creator>
 <guid isPermaLink="false">436 at http://127.0.0.1:8080/blog</guid>
</item>
</channel>
</rss>

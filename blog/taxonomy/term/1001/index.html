<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">


<!-- Mirrored from 127.0.0.1:8080/blog/taxonomy/term/1001 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Sep 2017 06:22:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>selinux | Everything is a Freaking DNS problem</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="alternate" type="application/rss+xml" title="RSS - selinux" href="0/feed/index.html" />
<link rel="shortcut icon" href="../../../misc/favicon/index.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/aggregator/aggregator/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/node/node/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/poll/poll/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/defaults/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/system/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/system-menus/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/user/user/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/cck/theme/content-module/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/date/date/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/geshifilter/geshifilter/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../misc/farbtastic/farbtastic/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/calendar/calendar/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/cck/modules/fieldgroup/fieldgroup/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/views/css/views/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/taxonomy/taxonomy/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/typography/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/layout/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/style/index.css?9" />
<link type="text/css" rel="stylesheet" media="print" href="../../../sites/default/themes/barlow/print/index.css?9" />
</head>

<body class="not-front not-logged-in page-taxonomy one-sidebar sidebar-left">
<div id="wrapper">

<div id="header" class="p1">

  <div id="branding">
      <div id="logo">
    <a href="../../../index/index.html" title="Everything is a Freaking DNS problem" rel="home">
    <img src="../../../files/me_small/index.jpg" alt="Everything is a Freaking DNS problem" id="logo-image" />
    </a></div>
        <h1><a href="../../../index/index.html" title="Home" rel="home">Everything is a Freaking DNS problem</a></h1>
        <div class="slogan">Devops Needs Sushi</div>
    </div>

  
  <div class="skip"><a href="#content" title="Skip to site content" accesskey="2">Skip to content</a></div>

  
  <div id="menu">
      </div>
</div>

<div id="content">

  <div id="sidebar-left" class="sidebar">
  <div class="block block-block" id="block-block-5">
  <div class="content"><p>This is the blog where <a href="http://www.krisbuytaert.be/bio.shtml">Kris Buytaert</a> points you to extremely interresting and totally irrelevant stuff that happens in Life , The Universe and Everything</p>
<p>Questions, want to contact me please read my <a href="../../../faq/index/index.html">FAQ</a> and  <a href="../../../social/index/index.html">Social Media Policy</a></p>
<p>You can hire me! I work as a consultant for <a href="http://www.inuits.eu/">Inuits.eu</a></p>
</div>
</div>

  </div>

<div id="main">
  <div id="breadcrumb"><div class="breadcrumb"><a href="../../../index/index.html">Home</a></div></div>
  <h2 id="title">selinux</h2>
<div class="content">
<div id="node-1110" class="node teaser blog cal">
    <acronym class="calendar published" title="2016-06-01T09:00:55+02:00">
  <span class="month">Jun</span>
  <span class="day">01</span>
    <span class="year">2016</span>
    </acronym>
    <h2 class="title"><a href="../../../linux-troubleshooting-101-2016-edition/index.html">Linux Troubleshooting 101 , 2016 Edition</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1536 first"><a href="../../../category/arp/index.html" rel="tag" title="">arp</a></li>
<li class="taxonomy_term_451"><a href="../451/index.html" rel="tag" title="">dns</a></li>
<li class="taxonomy_term_1537"><a href="../../../category/iptables/index.html" rel="tag" title="">iptables</a></li>
<li class="taxonomy_term_979"><a href="../979/index.html" rel="tag" title="">ntp</a></li>
<li class="taxonomy_term_1001 last active"><a href="index.html" rel="tag" title="" class="active">selinux</a></li>
</ul></span>
        </div>
  <div class="content"><p>Back in 2006 I wrote a <a href="http://www.krisbuytaert.be/blog/node/177">blog post</a> about linux troubleshoooting.  <a href="https://twitter.com/bertvanvreckem/status/737761421879054336" rel="nofollow">Bert Van Vreckem</a> pointed out that it might be time for an update ..</p>
<p>There's not that much that has changed .. however :)</p>
<p>Everything is a DNS Problem</p>
<p>Everything is a Fscking DNS Problem<br />
No really, Everything is a Fscking DNS Problem<br />
If it's not a fucking DNS Problem ..<br />
It's a Full Filesystem Problem<br />
If your filesystem isn't full<br />
It is a SELinux problem<br />
If you have SELinux disabled<br />
It might be an ntp problem<br />
If it's not an ntp problem<br />
It's an arp problem<br />
If it's not an arp problem...<br />
It is a Java Garbage Collection problem<br />
If you ain't running Java<br />
It's a natting problem<br />
If you are already on IPv6<br />
It's a Spanning Tree problem<br />
If it's not a spanning Tree problem...<br />
It's a USB problem<br />
If it's not a USB Problem<br />
It's a sharing IRQ Problem<br />
If it's not a sharing IRQ Problem<br />
But most often .. its a Freaking Dns Problem !</p>
<p>`</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../linux-troubleshooting-101-2016-edition/index.html#comments" title="Jump to the first comment of this posting.">3 comments</a></li>
</ul></div>
</div>
<div id="node-1109" class="node teaser blog cal">
    <acronym class="calendar published" title="2016-05-28T13:16:45+02:00">
  <span class="month">May</span>
  <span class="day">28</span>
    <span class="year">2016</span>
    </acronym>
    <h2 class="title"><a href="../../../docker-and-volumes-hell/index.html">Docker and volumes hell</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1535 first"><a href="../../../category/docker-0/index.html" rel="tag" title="">docker</a></li>
<li class="taxonomy_term_1484"><a href="../../../category/fpm/index.html" rel="tag" title="">fpm</a></li>
<li class="taxonomy_term_1001 last active"><a href="index.html" rel="tag" title="" class="active">selinux</a></li>
</ul></span>
        </div>
  <div class="content"><p>We're increasingly using Docker to build packages,  a fresh  chroot in which we prepare a number of packages, builds typically for ruby (rvm) , or python (virtualenv) or node stuf where the language ecosystem fails on us ...  and fpm the whole tree as a working artifact.</p>
<p>An example of such a build is my work on packaging Dashing.  <a href="https://github.com/KrisBuytaert/build-dashing" rel="nofollow">https://github.com/KrisBuytaert/build-dashing</a></p>
<p>Now part of that build is running the actual build script in docker with a local volume mounted inside the container This is your typical  -v=/home/src/dashing-docker/package-scripts:/scripts  param.</p>
<p>Earlier this week however I was stuck on a box where that combo did not want to work as expected. Docker clearly mounted the local volume, as it could execute the script in the directory, but for some reason it didn't want to write in the mounted volume.</p>
<p>docker run -v=/home/src/dashing-docker/package-scripts:/scripts dashing/rvm  /scripts/packagervm<br />
Usage of loopback devices is strongly discouraged for production use. Either use `--storage-opt dm.thinpooldev` or use `--storage-opt dm.no_warn_on_loop_devices=true` to suppress this warning.<br />
corefines: Your Ruby doesn't support refinements, so I'll fake them using plain monkey-patching (not scoped!).<br />
/usr/local/share/gems/gems/corefines-1.9.0/lib/corefines/support/fake_refinements.rb:26: warning: Refinements are experimental, and the behavior may change in future versions of Ruby!<br />
/usr/share/ruby/fileutils.rb:1381:in `initialize': Permission denied - rvm-1.27.0-1.x86_64.rpm (Errno::EACCES)</p>
<p>So what was I doing wrong, did the Docker params change, did I invert the order of the params, did I mistype them ? I added debugging to the script, (ls , chmod, etc..) and I couldn't seem to read or modify the directory. So I asked a coworker to be my wobbling duck.</p>
<p>He did more .. he wondered if this wasn't selinux.</p>
<p>And he was right..</p>
<p>Apr 23 21:47:00 mine23.inuits.eu audit[9570]: AVC avc:  denied  { write } for  pid=9570 comm="fpm" name="package-scripts" dev="dm-2" ino=368957 scontext=system_u:system_r:svirt_lxc_net_t:s0:c47,c929 tcontext=unconfined_u:object_r:unlabeled_t:s0 tclass=dir permissive=0<br />
Apr 23 21:47:02 mine23.inuits.eu python3[9597]: SELinux is preventing fpm from write access on the directory /home/src/dashing-docker/package-scripts.</p>
<p>So while I was looking for errors in docker, it was just my selinux set to enforce acting up and me not noticing it.</p>
<p>The quick way to verify obvisously was to setenforce 0  and trigger the build again that however is not a long term fix so  I changed the </p>
<p>semanage fcontext -a -t cgroup_t '/home/src/dashing-docker/package-scripts'<br />
restorecon -v '/home/src/dashing-docker/package-scripts'</p>
<p>That solves the problem</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-831" class="node teaser blog cal">
    <acronym class="calendar published" title="2008-12-01T21:14:48+01:00">
  <span class="month">Dec</span>
  <span class="day">01</span>
    <span class="year">2008</span>
    </acronym>
    <h2 class="title"><a href="../../../upgrading-fedora-10/index.html">Upgrading to Fedora 10 </a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1109 first"><a href="../../../category/fedora/index.html" rel="tag" title="">fedora</a></li>
<li class="taxonomy_term_1108"><a href="../../../category/fedora-10/index.html" rel="tag" title="">fedora 10</a></li>
<li class="taxonomy_term_461"><a href="../461/index.html" rel="tag" title="">open source</a></li>
<li class="taxonomy_term_1001 active"><a href="index.html" rel="tag" title="" class="active">selinux</a></li>
<li class="taxonomy_term_1107"><a href="../../../category/skype/index.html" rel="tag" title="">skype</a></li>
<li class="taxonomy_term_1110 last"><a href="../../../category/x8664/index.html" rel="tag" title="">x86_64</a></li>
</ul></span>
        </div>
  <div class="content"><p>As some of you know I run Fedora on my main Laptop, and Ubuntu on my EEE and my office Desktop.   My Ubuntu installs were pretty fresh, but my fedora was long due for an upgrade.    As after years of abuse (--force --nodeps) it usually is impossible to do a regular upgrade, so my best way out was a quick and fresh install on an isolated root partition.   (my /home/ etc live on separate volumes)</p>
<p><a href="http://raskas.be/" rel="nofollow">Johan</a> tricked me into installing a FC10 x86-64 setup which required some more work than usual, but I`m back in the same state as I was before I started the upgrade.  We'll almost .. as I expect I`ll be reinstalling packages I don't daily use on a frequent basis over the next couple of weeks.</p>
<p>I'll dig a bit deeper in my x86_64 struggles later but first I had to tackle the problems I had with stepping my Evolution to a fresh and hopefully more stable version.</p>
<p>Evolution fails to recognise  the fact that I have multiple calendars, or got confused.. anyway .. my calendar was empty and I had to recreate them all and import them again one by one.<br />
Luckily the content was still available in .ics</p>
<p>Also Evolution partly forgot about all my email accounts , it remembered their passwords after recreating them, but not their settings.. well. that is if I managed to recreate them all :)<br />
(If I`m not replying to a mail you sent me sinc last thursday.. I might just have forgotten about that email address ..</p>
<p>On to the x86_64 stuff then.  <a href="http://blog.verwilst.be/" rel="nofollow">Bort</a> pointed me to the<br />
<a href="http://labs.adobe.com/downloads/flashplayer10.html" rel="nofollow">Adobe Labs site</a> that had a working flash plugin.  The right symlink in my .mozilla/plugins and the first problem was solved.</p>
<p>There's 2 apps from Google that I sometimes abuse,  I don't know why I still use Picasa, there must be plenty of good open source alternatives out there ..  however for Google Earth I don't really have a good alternative.   bot work  (unlike previous Fedora/Googl Earth combinations)</p>
<p>The only thing that annoyed me was Google Earth and selinux  , I had to run some chcon s to solve the problems.</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/google-earth/libminizip.so'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/google-earth/librender.so'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/google-earth/libauth.so'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/google-earth/libevll.so'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/google-earth/lib*'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/google-earth/libnavigate.so'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/google-earth/liblayer.so'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/google-earth/libmeasure.so'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/google-earth/libbasicingest.so'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/google-earth/libgps.so'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/googleearth/libgooglesearch.so'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/googleearth/libinput_plugin.so'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">chcon -t textrel_shlib_t '/opt/google-earth/libflightsim.so'</div></li></ol></pre></div></p>
<p>A couple of more frustrations later  and the SELinux config got changed.  Afterall .. Life is to short for SELinux.</p>
<p>A must,  if you used too have Livna , or FreshRPMS is <a href="http://rpmfusion.org/" rel="nofollow">RPMFusion</a> a merger of the old repositories</p>
<p>Skype  seemed to be a bit more difficult.  I tried installing the rpm at first but I failed , then I read  <a href="http://liquidat.wordpress.com/2008/11/27/moving-on-64bit-linux-pulseaudio-fedora-10-and-so-on/" rel="nofollow">some tips</a> which suggested to use yum localinstall skype*.rpm</p>
<p>As I`m more of an apt-get user (yes even on CentOS etc) I don't usually try installing packages that way .. but it worked like a charm.    Skype started,  I could connect to the servers , however a test call  reveals no input sound.  Maybe if I try again with a headset later.</p>
<p>Anyway,  I`m pretty satisfied so far ...</p>
<p>Next step is to get that skype chat integrated in pidgin.. or hope people will realize they have to drop that proprietary tool one day..</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../upgrading-fedora-10/index.html#comments" title="Jump to the first comment of this posting.">2 comments</a></li>
</ul></div>
</div>
<div id="node-714" class="node teaser blog cal">
    <acronym class="calendar published" title="2008-08-25T21:05:55+02:00">
  <span class="month">Aug</span>
  <span class="day">25</span>
    <span class="year">2008</span>
    </acronym>
    <h2 class="title"><a href="../../../node/714/index.html">SELinux is Dead !</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1002 first"><a href="../1002/index.html" rel="tag" title="">apparmor</a></li>
<li class="taxonomy_term_461"><a href="../461/index.html" rel="tag" title="">open source</a></li>
<li class="taxonomy_term_621"><a href="../621/index.html" rel="tag" title="">opensuse</a></li>
<li class="taxonomy_term_1001 active"><a href="index.html" rel="tag" title="" class="active">selinux</a></li>
<li class="taxonomy_term_916 last"><a href="../916/index.html" rel="tag" title="">ubuntu</a></li>
</ul></span>
        </div>
  <div class="content"><p>No really it isn't but so isn't AppArmor, altough <a href="http://etbe.coker.com.au/2008/08/23/apparmor-is-dead/">Russel</a> claims it is. Weird how he totally rewords the <a href="http://news.opensuse.org/2008/08/20/opensuse-to-add-selinux-basic-enablement-in-111/">OpenSuse statements</a></p>
<p>From "While our customer experience shows that AppArmor is the best solution for the vast majority of users, applications, and use cases, we want to give all of our users the ability to choose the security framework that’s appropriate for their respective environments and needs. We continue to enable AppArmor as our default Host Intrusion Prevention System......"</p>
<p>To "The next step will be to make SE Linux the default and AppArmor the one that exists in a repository, and the step after that will be to remove AppArmor."</p>
<p>Given <a href="https://help.ubuntu.com/community/AppArmor">Ubuntu's AppArmor adoption</a> I don't see it die that fast ...</p>
<p>The real problem is who uses AppArmor or SELinux,  sadly most of the installations I run into have none of both technologies enabled.  Most Admins overrule their favourite distro's default config. The reason is pretty obvious as <a href="http://www.krisbuytaert.be/blog/node/335">I've</a> heard <a href="http://www.sxw.org.uk/lighting/">a lot of</a> <a href="http://en.wikipedia.org/wiki/SELinux#Quotes">intelligent</a> <a href="http://thunk.org/tytso/">people</a> say "Life Is Too short For SELinux"</p>
<p>So I wonder, how can you die if you never were really alive ?</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../node/714/index.html#comments" title="Jump to the first comment of this posting.">2 comments</a></li>
</ul></div>
</div>
</div>
</div>

</div>

<div id="footer" class="footer">
  No really .. everything is a funky DNS problem , you'll realise I`m right pretty soon !   
  <p class="credits">Powered by <a href="http://www.drupal.org/">Drupal</a> and the <a href="http://www.drupal.org/project/barlow">Barlow</a> theme by <a href="http://egonbianchet.net/">Egon Bianchet</a>.</p>
</div>

</div>

</body>

<!-- Mirrored from 127.0.0.1:8080/blog/taxonomy/term/1001 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Sep 2017 06:22:34 GMT -->
</html>

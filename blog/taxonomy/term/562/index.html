<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>linux-ha | Everything is a Freaking DNS problem</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="alternate" type="application/rss+xml" title="RSS - linux-ha" href="0/feed/index.html" />
<link rel="shortcut icon" href="../../../misc/favicon/index.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/aggregator/aggregator/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/node/node/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/poll/poll/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/defaults/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/system/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/system-menus/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/user/user/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/cck/theme/content-module/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/date/date/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/geshifilter/geshifilter/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../misc/farbtastic/farbtastic/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/calendar/calendar/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/cck/modules/fieldgroup/fieldgroup/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/views/css/views/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/taxonomy/taxonomy/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/typography/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/layout/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/style/index.css?9" />
<link type="text/css" rel="stylesheet" media="print" href="../../../sites/default/themes/barlow/print/index.css?9" />
</head>

<body class="not-front not-logged-in page-taxonomy one-sidebar sidebar-left">
<div id="wrapper">

<div id="header" class="p1">

  <div id="branding">
      <div id="logo">
    <a href="../../../index/index.html" title="Everything is a Freaking DNS problem" rel="home">
    <img src="../../../files/me_small/index.jpg" alt="Everything is a Freaking DNS problem" id="logo-image" />
    </a></div>
        <h1><a href="../../../index/index.html" title="Home" rel="home">Everything is a Freaking DNS problem</a></h1>
        <div class="slogan">Devops Needs Sushi</div>
    </div>

  
  <div class="skip"><a href="#content" title="Skip to site content" accesskey="2">Skip to content</a></div>

  
  <div id="menu">
      </div>
</div>

<div id="content">

  <div id="sidebar-left" class="sidebar">
  <div class="block block-block" id="block-block-5">
  <div class="content"><p>This is the blog where <a href="http://www.krisbuytaert.be/bio.shtml">Kris Buytaert</a> points you to extremely interresting and totally irrelevant stuff that happens in Life , The Universe and Everything</p>
<p>Questions, want to contact me please read my <a href="../../../faq/index/index.html">FAQ</a> and  <a href="../../../social/index/index.html">Social Media Policy</a></p>
<p>You can hire me! I work as a consultant for <a href="http://www.inuits.eu/">Inuits.eu</a></p>
</div>
</div>

  </div>

<div id="main">
  <div id="breadcrumb"><div class="breadcrumb"><a href="../../../index/index.html">Home</a></div></div>
  <h2 id="title">linux-ha</h2>
<div class="content">
<div id="node-1034" class="node teaser blog cal">
    <acronym class="calendar published" title="2011-02-10T20:20:44+01:00">
  <span class="month">Feb</span>
  <span class="day">10</span>
    <span class="year">2011</span>
    </acronym>
    <h2 class="title"><a href="../../../ensure-running/index.html">Ensure Running</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1328 first"><a href="../../../category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_475"><a href="../475/index.html" rel="tag" title="">heartbeat</a></li>
<li class="taxonomy_term_562 active"><a href="index.html" rel="tag" title="" class="active">linux-ha</a></li>
<li class="taxonomy_term_1438"><a href="../../../category/managed/index.html" rel="tag" title="">managed</a></li>
<li class="taxonomy_term_1436"><a href="../../../category/modules/index.html" rel="tag" title="">modules</a></li>
<li class="taxonomy_term_439"><a href="../439/index.html" rel="tag" title="">puppet</a></li>
<li class="taxonomy_term_1437 last"><a href="../../../category/unmanaged/index.html" rel="tag" title="">unmanaged</a></li>
</ul></span>
        </div>
  <div class="content"><p>Has anyone noticed that pretty much every puppet module one finds on the internet by default enables the service they try to configure in the module</p>
<p>When looking at it from a single machine point of view it makes sense to include the module , have it configure your service  and directly enable it by default.</p>
<p>So I started wondering .. isn't there anybody out there who is building clusters ?   Where services have to configured on multiple nodes but should NOT be running acitvely on all nodes by default because there is an external tool which manages that for you (Pacemaker framework eg.)</p>
<p>Agreed it's a small patch to get the functionality you want , but it brings an extra overhead when one upgrades the modules etc.</p>
<p>So if it doesn't bother you  please split your puppet module in 2 parts.. one you call to configure the service,  another which you call to enable the service , if you want to.</p>
<p>thnx !</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../ensure-running/index.html#comments" title="Jump to the first comment of this posting.">7 comments</a></li>
</ul></div>
</div>
<div id="node-1030" class="node teaser blog cal">
    <acronym class="calendar published" title="2011-01-23T23:04:15+01:00">
  <span class="month">Jan</span>
  <span class="day">24</span>
    <span class="year">2011</span>
    </acronym>
    <h2 class="title"><a href="../../../upcoming-2011-speaking-engagements/index.html">Upcoming 2011 Speaking Engagements</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1328 first"><a href="../../../category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_484"><a href="../484/index.html" rel="tag" title="">drupal</a></li>
<li class="taxonomy_term_768"><a href="../768/index.html" rel="tag" title="">fosdem</a></li>
<li class="taxonomy_term_562 active"><a href="index.html" rel="tag" title="" class="active">linux-ha</a></li>
<li class="taxonomy_term_599"><a href="../599/index.html" rel="tag" title="">opensource</a></li>
<li class="taxonomy_term_1336"><a href="../../../category/pacemaker/index.html" rel="tag" title="">pacemaker</a></li>
<li class="taxonomy_term_427 last"><a href="../427/index.html" rel="tag" title="">ukuug</a></li>
</ul></span>
        </div>
  <div class="content"><p><a href="http://www.lenzg.net/" rel="nofollow">Lenz</a> gave the good example so I`ll follow :)</p>
<p>Next weekend saturday  I`ll be giving a talk about devops at <a href="http://brussels.startupweekend.org/speakers/" rel="nofollow">StartUp Weekend Brussels</a>, from what I've read so far  it promises to be an audience that needs the talk, </p>
<p>The week after I`ll be speaking at the <a href="http://bxl2011.drupaldays.org/node/233" rel="nofollow">DrupalDevDays</a>,  again about devops , however this time with a touch of Drupal  ,  giving a devops talk at Devoxx last year to a Java audience learned me that the devops evangelist  need to  go outside of their usual  conference audiences and als talk to the people that are usually in the other silos. </p>
<p>Next march   I`ll be speaking at the <a href="http://www.ukuug.org/events/spring2011/programme/" rel="nofollow">UKUUG spring conference in Leeds</a>  this time about my experiences on High Availability with Pacemaker</p>
<p>And who knows I might squeeze in a talk at <a href="http://loadays.org/" rel="nofollow">Load</a> this year also .. </p>
<p>If you are around at one of these confs and you want to talk Devops, Clustering, sipx or just have a beer .. don't hesitate !  There's already <a href="http://twitter.com/#!/jpmens/status/28483625066430464" rel="nofollow">plenty of people</a> promising me beers , and some even sushi :)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-1022" class="node teaser blog cal">
    <acronym class="calendar published" title="2010-11-04T00:07:18+01:00">
  <span class="month">Nov</span>
  <span class="day">04</span>
    <span class="year">2010</span>
    </acronym>
    <h2 class="title"><a href="../../../high-availability-mysql-cookbook-review/index.html">High Availability MySQL Cookbook , the review</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1430 first"><a href="../../../category/cobbler/index.html" rel="tag" title="">cobbler</a></li>
<li class="taxonomy_term_899"><a href="../899/index.html" rel="tag" title="">drbd</a></li>
<li class="taxonomy_term_449"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_475"><a href="../475/index.html" rel="tag" title="">heartbeat</a></li>
<li class="taxonomy_term_562 active"><a href="index.html" rel="tag" title="" class="active">linux-ha</a></li>
<li class="taxonomy_term_458"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
<li class="taxonomy_term_1336"><a href="../../../category/pacemaker/index.html" rel="tag" title="">pacemaker</a></li>
<li class="taxonomy_term_439 last"><a href="../439/index.html" rel="tag" title="">puppet</a></li>
</ul></span>
        </div>
  <div class="content"><p>When I read on the internetz that Alex Davies was about the publish a <a href="https://www.packtpub.com/high-availability-mysql-cookbook/book" rel="nofollow">Packt book on MySQL HA</a>  I pinged my contacts at Packt and suggested that I'd review the book .</p>
<p>I've ran into <a href="https://sites.google.com/a/davz.net/alex-davies/" rel="nofollow">Alex</a> at some UKUUG conferences before and he's got a solid background on MySQL Cluster and other HA alternatives so I was looking forward to reading the book.</p>
<p>Alex starts of with a couple of indepth chapters on MySQL Cluster,  he does mention that it's not a fit for all problems, but I'd hoped he did it a bit more prominently ...    an upfront chapter outlining the different approaches and when which approach is a match could have been better.    The avid reader now might be 80 pages into MySQL cluster before he realizes it's not going to be a match for his problem.</p>
<p>I really loved the part where Alex correcly mentions that you should probably be using Puppet or so to manage the config files of your environment, rather than scp them around your different boxes ..</p>
<p>Alex then goes on to describe setting up MySQL replication and Multi Master replication with the different approaches one can take here,  he gives some nice tips on using LVM to reduce the downtime of your MySQL when having to transfer the dataset of an already existing MySQL setup, good stuff.</p>
<p>He then goes on to describe MySQL with shared storage ...   if you only mount your redundant sandisk once on your MySQL nodes my preference would probably be a Pacemaker stack  rather than a RedHat Cluster based setup,  but his setup seems to work too.   Alex quickly touches on using GFS to have your data disk mounted simultaneously on both nodes (keep in mind with only 1 active MySQLd)  and then goes on to describe a full DRBD based MySQL HA setup</p>
<p>The last chapter titled Performance tuning gives some very nice tips on both tuning your regular storage, as your<br />
GFS setup but also the tuning parameters for MySQL Cluster</p>
<p>I was also really happy to see the Appendixes on the basic installation where he advocates the use of Cobbler , Kickstart and LVM ..</p>
<p>One of the better books I read the past couple of years .. certainly the best book from Packt so far , I hope there is more quality stuff coming from that direction !</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../high-availability-mysql-cookbook-review/index.html#comments" title="Jump to the first comment of this posting.">4 comments</a></li>
</ul></div>
</div>
<div id="node-997" class="node teaser blog cal">
    <acronym class="calendar published" title="2010-04-07T19:16:20+02:00">
  <span class="month">Apr</span>
  <span class="day">07</span>
    <span class="year">2010</span>
    </acronym>
    <h2 class="title"><a href="../../../ukuug-spring-conference-2010/index.html">UKUUG Spring Conference 2010</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_455 first"><a href="../455/index.html" rel="tag" title="">conference</a></li>
<li class="taxonomy_term_1328"><a href="../../../category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_449"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_562 active"><a href="index.html" rel="tag" title="" class="active">linux-ha</a></li>
<li class="taxonomy_term_1393"><a href="../../../category/manchester/index.html" rel="tag" title="">manchester</a></li>
<li class="taxonomy_term_458"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
<li class="taxonomy_term_439"><a href="../439/index.html" rel="tag" title="">puppet</a></li>
<li class="taxonomy_term_1392"><a href="../../../category/simon/index.html" rel="tag" title="">simon</a></li>
<li class="taxonomy_term_427 last"><a href="../427/index.html" rel="tag" title="">ukuug</a></li>
</ul></span>
        </div>
  <div class="content"><p>Last week I was in Manchester for the 2010 UKUUG Spring Conference, right .. make that 2 weeks ago , :) </p>
<p>The UKUUG usually hosts the more interesting conferences around ... , it's not just the schedule that attrackts me , yes there's the strong focus towards Larger Scale Unix (and mostly Linux) deployments and how to manage them, but there's also the opportunity to chat in real life with the Devops from across the chunnel.</p>
<p>Spending time with <a href="http://www.devco.net/">R.I.Pienaar</a>, <a href="http://www.build-doctor.com/2010/03/26/ukuug-spring-conference-2010/">Julian Simpson</a>,  <a href="http://twitter.com/simonxwilkinson">Simon Wilkinson</a> , <a href="https://sites.google.com/a/davz.net/alex-davies/">Alex Davies</a> , <a href="http://database-explorer.blogspot.com/">Simon Riggs</a> , Josette, and many others is always fun .</p>
<p>As I was in town early I went to the preconference beer meetup and met with a lot of people and chatted about config management, virtualization   and lots of other stuff ...  after the pub the plan was to go for curries nearby .. and while walking to the , ahem  Bus stop, I managed to recognise <a href="http://monkeyiq.blogspot.com/">Ben Martin</a> from meeting him back ages ago in Hamburg for LinuxKongress , always fun ..</p>
<p>Apart from having to jump on a bus and our group being split at the curry place , rather than being able to tell the latecomers where to walk to and being seeted upstairs with the whole group , the curries were interesting and fun.</p>
<p>As I had been pushing <a href="http://blog.gardeviance.org/">Simon Wardley</a> on Twitter to submit a talk for the conference it was really great to finally see him present ..  His talk was the perfect soft introduction to the conference ...</p>
<p>Simon's talk  was followed   by a talk on Security for the virtual datacenters,  after I questionned the speaker  if anyone actualy uses TPM outside an academic lab the talk suddenly changed into a commercial presentation for a Quack, nuff said.</p>
<p>The Ever energetic <a href="http://www.shadowcat.co.uk/blog/matt-s-trout/">Matt S Trout</a> talked about 21st century perl before Simon "Life is to short for SELinux" Wilkinson talked about his experiences in getting the openAFS crowd  on Git.</p>
<p>Bummer Thierry Carrez didn't show us the real juice of UEC and just the installations of  a Cloud Controller and a Node Controller , but he managed to do so in approx 30 minutes as promised .</p>
<p>A talk titled Coherent and Integrated Configuration of Virtual Infrastructures always cathces my eye.. however when that talk turns out to be a Coherent and Integrated configuration only within the Univerity of Edinborough  (aka lcfg2) talk I`m dissapointed,  specially since it pretty  much didn't introduce any new concepts from the ones I introduced back in  my Durham UKUUG presentation</p>
<p>Luckily Andrew Stribblehill gave a very interesting talk on MySQL scalability,  in which I promised him some answers to his questions for the next day :)</p>
<p>The Conference dinner was without a doubt the best UKUUG dinner so far ,  no typical english "food",  no weird location (Old Trafford, an abandoned warship) , but just a big chinese place and plenty of food !</p>
<p>I started thurday morning in the wrong track,  I assumed to be in the Virtualization track, but I ended up in the Sun thinclient and Abusing Linux to serve weird desktops under the Green computing umbrella track, not my favourites ..</p>
<p>When Patrick and Julian started their Hudson hit my Puppet with a Cucumber talk (which featured some aweseom #devops content) I was a afraid that we'd had to look for a replacment PostgreSQL talk as Simon hadn't arrived yet ..  Luckily he arrived in time for his presentation and he explained us about the new replication features that are slowly making it into PostgreSQL,   one way ... log shipping ...  not really up to par with other alternatives yet :(</p>
<p>So with no further ado .. here's the presentation I gave</p>
<div style="width:425px" id="__ss_3582666"><strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/KrisBuytaert/mysql-ha-with-pacemaker" title="MySQL HA with  PaceMaker">MySQL HA with  PaceMaker</a></strong>
<object width="425" height="355"><param name="movie" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=mysql-pacemaker-100329022737-phpapp01&amp;stripped_title=mysql-ha-with-pacemaker" /><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><embed src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=mysql-pacemaker-100329022737-phpapp01&amp;stripped_title=mysql-ha-with-pacemaker" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="355"></embed></object><div style="padding:5px 0 12px">View more <a href="http://www.slideshare.net/">presentations</a> from <a href="http://www.slideshare.net/KrisBuytaert">Kris Buytaert</a>.</div>
</div>
<p>PS.  If at a Ukuug event and not sure about a person's name ... try Simon.. pretty good chance you're correct :)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../ukuug-spring-conference-2010/index.html#comments" title="Jump to the first comment of this posting.">1 comment</a></li>
</ul></div>
</div>
<div id="node-960" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-11-18T21:05:47+01:00">
  <span class="month">Nov</span>
  <span class="day">18</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="../../../got-interviewed/index.html">Got Interviewed</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_437 first"><a href="../437/index.html" rel="tag" title="">dnsproblem</a></li>
<li class="taxonomy_term_484"><a href="../484/index.html" rel="tag" title="">drupal</a></li>
<li class="taxonomy_term_449"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_475"><a href="../475/index.html" rel="tag" title="">heartbeat</a></li>
<li class="taxonomy_term_562 active"><a href="index.html" rel="tag" title="" class="active">linux-ha</a></li>
<li class="taxonomy_term_458"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
<li class="taxonomy_term_1336"><a href="../../../category/pacemaker/index.html" rel="tag" title="">pacemaker</a></li>
<li class="taxonomy_term_439"><a href="../439/index.html" rel="tag" title="">puppet</a></li>
<li class="taxonomy_term_672"><a href="../672/index.html" rel="tag" title="">virtualization</a></li>
<li class="taxonomy_term_470 last"><a href="../470/index.html" rel="tag" title="">xen</a></li>
</ul></span>
        </div>
  <div class="content"><p>by <a href="http://www.johnmwillis.com/devopsdays/devopsdays-09-interview-with-kris-buytaert/">@botchagalupe</a><br />
on Virtualization, Open Source tools and DNS Problems</p>
<p><embed src="http://blip.tv/play/AYGuxQoC" type="application/xshockwave-flash" width="480" height="390" allowscriptaccess="always" allowfullscreen="true"></embed></p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-951" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-10-19T23:46:41+02:00">
  <span class="month">Oct</span>
  <span class="day">19</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="../../../nines-damn-nines-and-more-nines/index.html">Nines , Damn Nines  and More Nines </a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_433 first"><a href="../433/index.html" rel="tag" title="">cluster</a></li>
<li class="taxonomy_term_899"><a href="../899/index.html" rel="tag" title="">drbd</a></li>
<li class="taxonomy_term_449"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_562 active"><a href="index.html" rel="tag" title="" class="active">linux-ha</a></li>
<li class="taxonomy_term_458"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
<li class="taxonomy_term_1316 last"><a href="../../../category/nines/index.html" rel="tag" title="">nines</a></li>
</ul></span>
        </div>
  <div class="content"><p>Funny how different experiences lead to different evaluations of tools. The MySQL HA solutions <a href="http://www.mysqlperformanceblog.com/2009/10/16/finding-your-mysql-high-availability-solution-–-the-questions/" rel="nofollow">the MySQL Performanceblog</a> list, are almost listed in the complete opposited order of what  my impressions are.</p>
<p>Ok agreed, I should probably not put my MySQL NDB experiences from 2-3 years ago with multiple Query of deaths and more problems than you into account  anymore ,  but back then went in the list Less stable than a single node.   I've had NDB POC setups going down for much more than 05:16 minutes<br />
Ndb comes with a lot of restrictions, there are</p>
<p>As for MySQL on DRBD, <a href="http://www.krisbuytaert.be/blog/mysql-and-drbd-often-say-no">I've said this before</a> , I love DRBD, but having to wait for a long InnoDB recovery after a failover  just kills your uptime ,<br />
I remember being called by a customer during <a href="http://lefred.be/">Fred</a> last holiday who was waiting over 20 minutes for recovery , twice, so putting the DRBD/San setup second would not be my preference.   But agreed .. it's only listed at 99.9% meaning almost 9 hours of downtime per year are allowed.</p>
<p>On the other hand we've seen database uptime of MySQL MultiMaster setups with Heartbeat reaching better figures than 99.99%  Heck I've seen single nodes  achieve better  than 99.99% :)</p>
<p>So what does this teach us ... there is no golden rule for HA,  lots of situations are different,  it's the preferences of the customer, the size of the database,   the kind of application , and much<br />
more ..  you always need to think and evaluate the environment ...</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../nines-damn-nines-and-more-nines/index.html#comments" title="Jump to the first comment of this posting.">8 comments</a></li>
</ul></div>
</div>
<div id="node-869" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-02-02T22:00:36+01:00">
  <span class="month">Feb</span>
  <span class="day">02</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="../../../everything-fine-whitespace-problem/index.html">Everything is a fine whitespace problem ... </a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_449 first"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_475"><a href="../475/index.html" rel="tag" title="">heartbeat</a></li>
<li class="taxonomy_term_562 active"><a href="index.html" rel="tag" title="" class="active">linux-ha</a></li>
<li class="taxonomy_term_1178"><a href="../../../category/whitespace/index.html" rel="tag" title="">whitespace</a></li>
<li class="taxonomy_term_1177 last"><a href="../../../category/xml/index.html" rel="tag" title="">xml</a></li>
</ul></span>
        </div>
  <div class="content"><p>Couple of days ago I was working on a Linux Heartbeat v2 setup.<br />
Upon inserting an XML snippet into the cib  cib-adm started eating memory fast until the oom killer kicked in.</p>
<p>The environment  was running a fairly old heartbeat-2.0.8 version so I upgraded to  heartbeat-2.1.4-2.1  and there I got a nice warning that my XML sintax wasn't correct.</p>
<p>There was a whitespace in the XML syntax.</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&lt;expression attribute=&quot;#replicationvalue&quot; id=&quot;is_lagged&quot; operation =&quot;gt&quot;  ... &gt;&lt;</div></li></ol></pre></div></p>
<p>Removing the  whitespace solves the problem, also on the older version.  So the problem is already fixed upstream.. but you might run into it anyhow.</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../everything-fine-whitespace-problem/index.html#comments" title="Jump to the first comment of this posting.">2 comments</a></li>
</ul></div>
</div>
<div id="node-750" class="node teaser blog cal">
    <acronym class="calendar published" title="2008-10-25T15:56:28+02:00">
  <span class="month">Oct</span>
  <span class="day">25</span>
    <span class="year">2008</span>
    </acronym>
    <h2 class="title"><a href="../../../node/750/index.html">Wholesale High Availability</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1073 first"><a href="../1073/index.html" rel="tag" title="">alan robertson</a></li>
<li class="taxonomy_term_449"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_673"><a href="../673/index.html" rel="tag" title="">high-availability</a></li>
<li class="taxonomy_term_562 active"><a href="index.html" rel="tag" title="" class="active">linux-ha</a></li>
<li class="taxonomy_term_464"><a href="../464/index.html" rel="tag" title="">vapourware</a></li>
<li class="taxonomy_term_672 last"><a href="../672/index.html" rel="tag" title="">virtualization</a></li>
</ul></span>
        </div>
  <div class="content"><p><a href="http://techthoughts.typepad.com/managing_computers/2008/10/using-virtualization-to-provide-ha-at-wholesale.html" rel="nofollow">Alan</a> just coined WholeSale HA.  The idea of  rebooting a whole virtual machine rather than just failing over 1 service.</p>
<p>He wants to have the best of both worlds in 1 framework, he however doesn't specify what parts he likes from the WholeSale HA setup</p>
<p>Yes you want to use it coupled with hardware predictive failure analysis tools. In order to achieve Higher Availabilty, but I don't think the WholeSale HA part is real HA.</p>
<p>WholeSale HA isn't going to be fast enough for most of the business critical environments.<br />
You simply cannot afford to reboot or even boot a full machine and the related downtime that brings for your service.</p>
<p>So yes a best effort combination, but with a strong focus on the application state would be preferred.  WholeSale is a good start .. but it's definitely not where you want to stop.</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-730" class="node teaser blog cal">
    <acronym class="calendar published" title="2008-09-24T17:27:26+02:00">
  <span class="month">Sep</span>
  <span class="day">24</span>
    <span class="year">2008</span>
    </acronym>
    <h2 class="title"><a href="../../../bug-ifconfig/index.html">Bug in ifconfig ? </a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_449 first"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_475"><a href="../475/index.html" rel="tag" title="">heartbeat</a></li>
<li class="taxonomy_term_1032"><a href="../1032/index.html" rel="tag" title="">ifconfig</a></li>
<li class="taxonomy_term_1031"><a href="../1031/index.html" rel="tag" title="">ip</a></li>
<li class="taxonomy_term_562 active"><a href="index.html" rel="tag" title="" class="active">linux-ha</a></li>
<li class="taxonomy_term_599 last"><a href="../599/index.html" rel="tag" title="">opensource</a></li>
</ul></span>
        </div>
  <div class="content"><p>So earlier this week I ran into the weirdest problem with Linux-HA.  Heartbeat was happily adding an IP address as an active resource so one of my nodes when needed, but upon removal it failed to remove the IP from the stack.  Further debugging learned that the Heartbeat scripts claimed the ip wasn't on the actual stack.</p>
<p>It was.. but it the output from ifconfig was different from what it expected it to be.</p>
<p>Heartbeat checks the output of ifconfig and expects to find the IP address it added itselve to be on a :0 or similar interface.     Now ifconfig only seems output 8 characters for the interface name  Which means that when you have an interface called eth0:0 the output perfectly lists it and heartbea<br />
t is smart enough to remove the ip again when the node goes to standby.  If however you have   a vlan with 3 digits on a bond interface Heartbeat will add :0 to bond0.129  , the Heartbeat resource will add the ip address perfectly but opon checking all the :0 interfaces the bond0.129:0 interface won't be parsed as ifconfig outputs it as bond0.129 , hence resulting in a potential painfull situation where 2 nodes still share an IP address.</p>
<p>So where's the actual problem ifconfig, or heartbeat,   I'd say both, but the easiest fix will be in  Heartbeat,  afterall there are other preferred ways of adding an ip addres to an interface. ip addr add comes to mind :)</p>
<p>So I filed a <a href="http://developerbugs.linux-foundation.org/show_bug.cgi?id=1968" rel="nofollow">bug report</a> :)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../bug-ifconfig/index.html#comments" title="Jump to the first comment of this posting.">1 comment</a></li>
</ul></div>
</div>
<div id="node-533" class="node teaser blog cal">
    <acronym class="calendar published" title="2007-12-17T21:59:32+01:00">
  <span class="month">Dec</span>
  <span class="day">17</span>
    <span class="year">2007</span>
    </acronym>
    <h2 class="title"><a href="../../../node/533/index.html">Integrating HA and Virtualization</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_673 first"><a href="../673/index.html" rel="tag" title="">high-availability</a></li>
<li class="taxonomy_term_562 active"><a href="index.html" rel="tag" title="" class="active">linux-ha</a></li>
<li class="taxonomy_term_672 last"><a href="../672/index.html" rel="tag" title="">virtualization</a></li>
</ul></span>
        </div>
  <div class="content"><p><a href="http://techthoughts.typepad.com/managing_computers/2007/12/how-managed-vir.html">Alan Robertson</a> is discussing  how Managed Virtualization (including HA) conflicts with System Management</p>
<p>He has some interesting points regarding managing infrastructure  , in his vision there are just too much layers that don't talk to eachother .<br />
He also points out some of the issues with CIM and SNMP .</p>
<p>Alan thinks the ideal way to go is to have your HA solution manage your Virtualization also.</p>
<p>I`m wondering if this doesn't add too much complexity.</p>
<p>If you are already making sure the services in your virtual machines are highly available, then why would you want to add another layer of complexity ?   Surely the idea of being able to migrate virtual machines around sounds tempting but do we really need that extra layer of complexity ?    </p>
<p>I've explained that migrating a virtual machine to another server won't help you when your apps crash or when your physical server fails.</p>
<p>But keeping an overview of which services are running where from 1 place seems like an interesting idea.  </p>
<p>I've been tinkering about using the resource concept of Linux-HA however to serve another purpose than pure high availability.  You might want to use its constraints to define how many virtual machines should run on and how much resources they can use on a certain physical machine.  Hence create a loadbalancing infrastructure with it.</p>
<p>(I`m really really hoping someone now replies to this with a url  which gives me a HAResource that does Live Migration :))</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div class="item-list"><ul class="pager"><li class="pager-current first">1</li>
<li class="pager-item"><a href="index1.html?page=1" title="Go to page 2" class="active">2</a></li>
<li class="pager-next"><a href="index1.html?page=1" title="Go to next page" class="active">next ›</a></li>
<li class="pager-last last"><a href="index1.html?page=1" title="Go to last page" class="active">last »</a></li>
</ul></div></div>
</div>

</div>

<div id="footer" class="footer">
  No really .. everything is a funky DNS problem , you'll realise I`m right pretty soon !   
  <p class="credits">Powered by <a href="http://www.drupal.org/">Drupal</a> and the <a href="http://www.drupal.org/project/barlow">Barlow</a> theme by <a href="http://egonbianchet.net/">Egon Bianchet</a>.</p>
</div>

</div>

</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>hpc | Everything is a Freaking DNS problem</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="alternate" type="application/rss+xml" title="RSS - hpc" href="0/feed/index.html" />
<link rel="shortcut icon" href="../../../misc/favicon/index.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/aggregator/aggregator/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/node/node/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/poll/poll/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/defaults/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/system/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/system-menus/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/user/user/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/cck/theme/content-module/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/date/date/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/geshifilter/geshifilter/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../misc/farbtastic/farbtastic/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/calendar/calendar/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/cck/modules/fieldgroup/fieldgroup/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/views/css/views/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/taxonomy/taxonomy/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/typography/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/layout/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/style/index.css?i" />
<link type="text/css" rel="stylesheet" media="print" href="../../../sites/default/themes/barlow/print/index.css?i" />
</head>

<body class="not-front not-logged-in page-taxonomy one-sidebar sidebar-left">
<div id="wrapper">

<div id="header" class="p1">

  <div id="branding">
      <div id="logo">
    <a href="../../../index/index.html" title="Everything is a Freaking DNS problem" rel="home">
    <img src="../../../files/me_small/index.jpg" alt="Everything is a Freaking DNS problem" id="logo-image" />
    </a></div>
        <h1><a href="../../../index/index.html" title="Home" rel="home">Everything is a Freaking DNS problem</a></h1>
        <div class="slogan">Devops Needs Sushi</div>
    </div>

  
  <div class="skip"><a href="#content" title="Skip to site content" accesskey="2">Skip to content</a></div>

  
  <div id="menu">
      </div>
</div>

<div id="content">

  <div id="sidebar-left" class="sidebar">
  <div class="block block-block" id="block-block-5">
  <div class="content"><p>This is the blog where <a href="http://www.krisbuytaert.be/bio.shtml">Kris Buytaert</a> points you to extremely interresting and totally irrelevant stuff that happens in Life , The Universe and Everything</p>
<p>Questions, want to contact me please read my <a href="../../../faq/index/index.html">FAQ</a> and  <a href="../../../social/index/index.html">Social Media Policy</a></p>
<p>You can hire me! I work as a consultant for <a href="http://www.inuits.eu/">Inuits.eu</a></p>
</div>
</div>

  </div>

<div id="main">
  <div id="breadcrumb"><div class="breadcrumb"><a href="../../../index/index.html">Home</a></div></div>
  <h2 id="title">hpc</h2>
<div class="content">
<div id="node-504" class="node teaser blog cal">
    <acronym class="calendar published" title="2007-11-10T16:54:46+01:00">
  <span class="month">Nov</span>
  <span class="day">10</span>
    <span class="year">2007</span>
    </acronym>
    <h2 class="title"><a href="../../../scaling-drupal/index.html">Scaling Drupal</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_484 first"><a href="../484/index.html" rel="tag" title="">drupal</a></li>
<li class="taxonomy_term_449"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_631 active"><a href="index.html" rel="tag" title="" class="active">hpc</a></li>
<li class="taxonomy_term_632"><a href="../632/index.html" rel="tag" title="">infrastructure</a></li>
<li class="taxonomy_term_458"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
<li class="taxonomy_term_630 last"><a href="../630/index.html" rel="tag" title="">scaling</a></li>
</ul></span>
        </div>
  <div class="content"><p><a href="http://www.johnandcailin.com/usernode/john" rel="nofollow">John Quinn</a> writes about <a href="http://www.johnandcailin.com/blog/john/scaling-drupal-open-source-infrastructure-high-traffic-drupal-sites" rel="nofollow">Scaling Drupal</a>  he is taking a one step at a time approach and is still writing his 4th and 5 stages.</p>
<p>His first step obviously is separating the drupal from a separate database server,  and he chooses mysql for this purpose, moving your DB to a different machine is a good thing to do.</p>
<p>However then he gets this crazy idea of using NFS to share his his drupal shared files :(<br />
(he even dares to mention that the setup ease is good)  Folks,  we abandonned NFS in the late nineties. NFS is still a recipe for disaster,  it has performance issues , it as stability issues (stale locks), and no security admin in his right mind will tolerate portmap to be running in his DMZ.<br />
(Also think about the IO path that one has to follow to serve a static file to a surfer when the file is stored on a remote NFS volume) </p>
<p>On top of that he adds complexity in a phase where it isn't needed yet.  Because of the fact he needs to manage and secure NFS and he is storing his critical files on the other side of the ethernet cable he did create a single point of failure he didn't need creating yet.<br />
Yes as soon as you start to scale you need to look at a scalable and redundant way to share your files.<br />
When those files are pretty static you'll start out with a set of rsync scripts or scripts that push them to different servers upon deploying your application.  When they are changing often you start looking into filesystems or block devices that bring you replication, such as DRBD or Lustre<br />
But if today his NFS server goes down he is screwed,  much harder than when his database has a hickup.</p>
<p>One could discuss the order of scaling,  but adding more webservers might not always be the first step to take,   one might want to tackle the database first depending on the application.<br />
He decides to share the load of his application over multiple Drupal instances using apache mod_proxy ,  then adds Linux-HA to make it highly available.<br />
I`m interested in knowing  why he chose for apache mod_proxy and not for LVS  </p>
<p>Although using NFS for me belongs in a <cite>How NOT to scale</cite> tutorial, his other steps give you  a good idea of the steps to take.  </p>
<p>I`m looking forward to his next steps :) I hope that in part 4 he also removes NFS in favour of a solution with no performance and locking issues that really takes away a big fat single point of failure. In part 5 he discusses how to scale your database environment.  The actual order of implementing step 2 and 5  will be different for each setup.   </p>
<p>Anyway.. I`m following up on his next steps.. interesting reading</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../scaling-drupal/index.html#comments" title="Jump to the first comment of this posting.">29 comments</a></li>
</ul></div>
</div>
</div>
</div>

</div>

<div id="footer" class="footer">
  No really .. everything is a funky DNS problem , you'll realise I`m right pretty soon !   
  <p class="credits">Powered by <a href="http://www.drupal.org/">Drupal</a> and the <a href="http://www.drupal.org/project/barlow">Barlow</a> theme by <a href="http://egonbianchet.net/">Egon Bianchet</a>.</p>
</div>

</div>

</body>
</html>

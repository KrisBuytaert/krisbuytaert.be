<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">


<!-- Mirrored from 127.0.0.1:8080/blog/taxonomy/term/899 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Sep 2017 19:47:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>drbd | Everything is a Freaking DNS problem</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="alternate" type="application/rss+xml" title="RSS - drbd" href="0/feed/index.html" />
<link rel="shortcut icon" href="../../../misc/favicon/index.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/aggregator/aggregator/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/node/node/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/poll/poll/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/defaults/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/system/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/system/system-menus/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/user/user/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/cck/theme/content-module/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/date/date/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/geshifilter/geshifilter/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../misc/farbtastic/farbtastic/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/calendar/calendar/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/cck/modules/fieldgroup/fieldgroup/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/all/modules/views/css/views/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../modules/taxonomy/taxonomy/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/typography/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/layout/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/default/themes/barlow/style/index.css?9" />
<link type="text/css" rel="stylesheet" media="print" href="../../../sites/default/themes/barlow/print/index.css?9" />
</head>

<body class="not-front not-logged-in page-taxonomy one-sidebar sidebar-left">
<div id="wrapper">

<div id="header" class="p1">

  <div id="branding">
      <div id="logo">
    <a href="../../../index/index.html" title="Everything is a Freaking DNS problem" rel="home">
    <img src="../../../files/me_small/index.jpg" alt="Everything is a Freaking DNS problem" id="logo-image" />
    </a></div>
        <h1><a href="../../../index/index.html" title="Home" rel="home">Everything is a Freaking DNS problem</a></h1>
        <div class="slogan">Devops Needs Sushi</div>
    </div>

  
  <div class="skip"><a href="#content" title="Skip to site content" accesskey="2">Skip to content</a></div>

  
  <div id="menu">
      </div>
</div>

<div id="content">

  <div id="sidebar-left" class="sidebar">
  <div class="block block-block" id="block-block-5">
  <div class="content"><p>This is the blog where <a href="http://www.krisbuytaert.be/bio.shtml">Kris Buytaert</a> points you to extremely interresting and totally irrelevant stuff that happens in Life , The Universe and Everything</p>
<p>Questions, want to contact me please read my <a href="../../../faq/index/index.html">FAQ</a> and  <a href="../../../social/index/index.html">Social Media Policy</a></p>
<p>You can hire me! I work as a consultant for <a href="http://www.inuits.eu/">Inuits.eu</a></p>
</div>
</div>

  </div>

<div id="main">
  <div id="breadcrumb"><div class="breadcrumb"><a href="../../../index/index.html">Home</a></div></div>
  <h2 id="title">drbd</h2>
<div class="content">
<div id="node-1022" class="node teaser blog cal">
    <acronym class="calendar published" title="2010-11-04T00:07:18+01:00">
  <span class="month">Nov</span>
  <span class="day">04</span>
    <span class="year">2010</span>
    </acronym>
    <h2 class="title"><a href="../../../high-availability-mysql-cookbook-review/index.html">High Availability MySQL Cookbook , the review</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1430 first"><a href="../../../category/cobbler/index.html" rel="tag" title="">cobbler</a></li>
<li class="taxonomy_term_899 active"><a href="index.html" rel="tag" title="" class="active">drbd</a></li>
<li class="taxonomy_term_449"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_475"><a href="../475/index.html" rel="tag" title="">heartbeat</a></li>
<li class="taxonomy_term_562"><a href="../562/index.html" rel="tag" title="">linux-ha</a></li>
<li class="taxonomy_term_458"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
<li class="taxonomy_term_1336"><a href="../../../category/pacemaker/index.html" rel="tag" title="">pacemaker</a></li>
<li class="taxonomy_term_439 last"><a href="../439/index.html" rel="tag" title="">puppet</a></li>
</ul></span>
        </div>
  <div class="content"><p>When I read on the internetz that Alex Davies was about the publish a <a href="https://www.packtpub.com/high-availability-mysql-cookbook/book" rel="nofollow">Packt book on MySQL HA</a>  I pinged my contacts at Packt and suggested that I'd review the book .</p>
<p>I've ran into <a href="https://sites.google.com/a/davz.net/alex-davies/" rel="nofollow">Alex</a> at some UKUUG conferences before and he's got a solid background on MySQL Cluster and other HA alternatives so I was looking forward to reading the book.</p>
<p>Alex starts of with a couple of indepth chapters on MySQL Cluster,  he does mention that it's not a fit for all problems, but I'd hoped he did it a bit more prominently ...    an upfront chapter outlining the different approaches and when which approach is a match could have been better.    The avid reader now might be 80 pages into MySQL cluster before he realizes it's not going to be a match for his problem.</p>
<p>I really loved the part where Alex correcly mentions that you should probably be using Puppet or so to manage the config files of your environment, rather than scp them around your different boxes ..</p>
<p>Alex then goes on to describe setting up MySQL replication and Multi Master replication with the different approaches one can take here,  he gives some nice tips on using LVM to reduce the downtime of your MySQL when having to transfer the dataset of an already existing MySQL setup, good stuff.</p>
<p>He then goes on to describe MySQL with shared storage ...   if you only mount your redundant sandisk once on your MySQL nodes my preference would probably be a Pacemaker stack  rather than a RedHat Cluster based setup,  but his setup seems to work too.   Alex quickly touches on using GFS to have your data disk mounted simultaneously on both nodes (keep in mind with only 1 active MySQLd)  and then goes on to describe a full DRBD based MySQL HA setup</p>
<p>The last chapter titled Performance tuning gives some very nice tips on both tuning your regular storage, as your<br />
GFS setup but also the tuning parameters for MySQL Cluster</p>
<p>I was also really happy to see the Appendixes on the basic installation where he advocates the use of Cobbler , Kickstart and LVM ..</p>
<p>One of the better books I read the past couple of years .. certainly the best book from Packt so far , I hope there is more quality stuff coming from that direction !</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../high-availability-mysql-cookbook-review/index.html#comments" title="Jump to the first comment of this posting.">4 comments</a></li>
</ul></div>
</div>
<div id="node-958" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-11-12T22:01:43+01:00">
  <span class="month">Nov</span>
  <span class="day">12</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="../../../yet-another-dns-issue/index.html">Yet Another DNS Issue</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_437 first"><a href="../437/index.html" rel="tag" title="">dnsproblem</a></li>
<li class="taxonomy_term_899 active"><a href="index.html" rel="tag" title="" class="active">drbd</a></li>
<li class="taxonomy_term_449"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_1335 last"><a href="../../../category/linux-cluster/index.html" rel="tag" title="">linux-cluster</a></li>
</ul></span>
        </div>
  <div class="content"><p>While browsing trough  my enormous mailinglist backlog I ran into the following message from Gianluca Cecchi on the DRBD-user mailing list</p>
<p>guess I`ll have to give Lars a T-Shirt when we next meet ;)</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">From: Gianluca Cecchi</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">To: drbd-user@lists.linbit.com</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Subject: [DRBD-user] notes on 8.3.2</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">- drbdadm create-md r0 segfaults when the command &quot;hostname&quot; on the</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">server contains the fully qualified domain name but you have put only</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">the hostname part in drbd.conf</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Instead, the command &quot;drbdadm dump&quot; correctly gives you a warning in</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">this case (suggesting how to correct the error you made....):</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">suppose complete hostname is virtfed.domainname.com and you put</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">virtfed alone in drbd.conf</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">[root@virtfed ~]# drbdadm dump</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">WARN: no normal resources defined for this host (virtfed.domainname.com)!?</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">while</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">[root@virtfed ~]# drbdadm create-md r0</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Segmentation fault</div></li></ol></pre></div></p>
<p>Guess I`ll have to give the Linbit crowd a T-Shirt when we next meet ;)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../yet-another-dns-issue/index.html#comments" title="Jump to the first comment of this posting.">1 comment</a></li>
</ul></div>
</div>
<div id="node-951" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-10-19T23:46:41+02:00">
  <span class="month">Oct</span>
  <span class="day">19</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="../../../nines-damn-nines-and-more-nines/index.html">Nines , Damn Nines  and More Nines </a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_433 first"><a href="../433/index.html" rel="tag" title="">cluster</a></li>
<li class="taxonomy_term_899 active"><a href="index.html" rel="tag" title="" class="active">drbd</a></li>
<li class="taxonomy_term_449"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_562"><a href="../562/index.html" rel="tag" title="">linux-ha</a></li>
<li class="taxonomy_term_458"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
<li class="taxonomy_term_1316 last"><a href="../../../category/nines/index.html" rel="tag" title="">nines</a></li>
</ul></span>
        </div>
  <div class="content"><p>Funny how different experiences lead to different evaluations of tools. The MySQL HA solutions <a href="http://www.mysqlperformanceblog.com/2009/10/16/finding-your-mysql-high-availability-solution-–-the-questions/" rel="nofollow">the MySQL Performanceblog</a> list, are almost listed in the complete opposited order of what  my impressions are.</p>
<p>Ok agreed, I should probably not put my MySQL NDB experiences from 2-3 years ago with multiple Query of deaths and more problems than you into account  anymore ,  but back then went in the list Less stable than a single node.   I've had NDB POC setups going down for much more than 05:16 minutes<br />
Ndb comes with a lot of restrictions, there are</p>
<p>As for MySQL on DRBD, <a href="http://www.krisbuytaert.be/blog/mysql-and-drbd-often-say-no">I've said this before</a> , I love DRBD, but having to wait for a long InnoDB recovery after a failover  just kills your uptime ,<br />
I remember being called by a customer during <a href="http://lefred.be/">Fred</a> last holiday who was waiting over 20 minutes for recovery , twice, so putting the DRBD/San setup second would not be my preference.   But agreed .. it's only listed at 99.9% meaning almost 9 hours of downtime per year are allowed.</p>
<p>On the other hand we've seen database uptime of MySQL MultiMaster setups with Heartbeat reaching better figures than 99.99%  Heck I've seen single nodes  achieve better  than 99.99% :)</p>
<p>So what does this teach us ... there is no golden rule for HA,  lots of situations are different,  it's the preferences of the customer, the size of the database,   the kind of application , and much<br />
more ..  you always need to think and evaluate the environment ...</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../nines-damn-nines-and-more-nines/index.html#comments" title="Jump to the first comment of this posting.">8 comments</a></li>
</ul></div>
</div>
<div id="node-922" class="node teaser blog cal">
    <acronym class="calendar published" title="2009-07-01T16:01:57+02:00">
  <span class="month">Jul</span>
  <span class="day">01</span>
    <span class="year">2009</span>
    </acronym>
    <h2 class="title"><a href="../../../drbd2-ocfs2-unexplained-crashes/index.html">DRBD2, OCFS2,  Unexplained crashes</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_899 first active"><a href="index.html" rel="tag" title="" class="active">drbd</a></li>
<li class="taxonomy_term_434"><a href="../434/index.html" rel="tag" title="">gfs</a></li>
<li class="taxonomy_term_449"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_1268"><a href="../../../category/iscsi/index.html" rel="tag" title="">iscsi</a></li>
<li class="taxonomy_term_1269"><a href="../../../category/netconsole/index.html" rel="tag" title="">netconsole</a></li>
<li class="taxonomy_term_1267 last"><a href="../../../category/ocfs2/index.html" rel="tag" title="">ocfs2</a></li>
</ul></span>
        </div>
  <div class="content"><p>I was trying to setup a dual-primary DRBD environment, with a shared disk with either OCFS2 or GFS.   The environment is a Centos 5.3 with DRBD82 (but also tried with DRBD83 from testing) .</p>
<p>Setting up a single primary disk and running bonnie++ on it worked Setting up a dual-primary disk, only mounting it on one node (ext3) and running bonnie++  worked</p>
<p>When setting up ocfs2 on the /dev/drbd0 disk and mounting it on both nodes, basic functionality seemed in place but usually less than 5-10 minutes after I start bonnie++ as a test on one of the nodes , both nodes power cycle  with no errors in the logfiles, just a crash.</p>
<p>When at the console at the time of crash it looks like a disk IO (you can type , but actions happen)  block happens  then a reboot, no panics, no oops , nothing. ( sysctl panic values set to timeouts etc )<br />
Setting up a dual-primary disk , with ocfs2 only mounting it on one node and starting bonnie++ causes only that node to crash.</p>
<p>On DRBD level I got the following error when that node disappears<br />
<div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">drbd0: PingAck did not arrive in time.</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">drbd0: peer( Primary -&gt; Unknown ) conn( Connected -&gt; NetworkFailure )</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">pdsk(UpToDate -&gt; DUnknown )</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">drbd0: asender terminated</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">drbd0: Terminating asender thread</div></li></ol></pre></div><br />
That however is an expected error because of the reboot.</p>
<p>At first I assumed OCFS2 to be the root of this problem ..so I moved forward and setup an ISCSI target on a 3rd node, and used that device with the same OCFS2 setup. There no crashes occured and bonnie++ flawlessly completed it test run. </p>
<p>So my attention went  back to the combination of DRBD and OCFS<br />
I tried both DRBD 8.2 drbd82-8.2.6-1.el5.centos kmod-drbd82-8.2.6-2  and the 83 variant from Centos Testing</p>
<p>At first I was trying with the ocfs2 1.4.1-1.el5.i386.rpm verson but upgrading to  1.4.2-1.el5.i386.rpm didn't change the behaviour </p>
<p>Both the DRBD as the OCFS mailinglist were fairly supportive pointing me out that it was probably OCFS2 fencing both hosts after missing the heartbeat, and suggested increasing the deathtimetimeout values.</p>
<p>I however wanted to confirm that. As I got no entries in syslog I attached a Cyclades err Avocent Terminal server to the device in the hope that I'd capture the last kernel messsages there ...   no such luck either.</p>
<p>On the OCFS2 mailinlist people pointed out that i'd use netconsole to catch the logs on a remote node<br />
I set up netconsole using</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">modprobe  netconsole netconsole=&quot;@/,@172.16.32.1/&quot;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">sysctl -w kernel.printk=&quot;7 4 1 7&quot;</div></li></ol></pre></div></p>
<p>After which indeed I catched error on my remote host..<br />
<div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">[base-root@CCMT-A ~]# nc -l -u -p 6666</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">(8,0):o2hb_write_timeout:166 ERROR: Heartbeat write timeout to device</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">drbd0 after 478000 milliseconds</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">(8,0):o2hb_stop_all_regions:1873 ERROR: stopping heartbeat on all active</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">regions.</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">ocfs2 is very sorry to be fencing this system by restarting</div></li></ol></pre></div></p>
<p>One'd think that it output over Serial console before it log over the network :)   It doesn't .</p>
<p>Next step is that I`ll start fiddling some more with the timeout values :)  (note the ":)")</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-657" class="node teaser blog cal">
    <acronym class="calendar published" title="2008-04-28T19:33:07+02:00">
  <span class="month">Apr</span>
  <span class="day">28</span>
    <span class="year">2008</span>
    </acronym>
    <h2 class="title"><a href="../../../mysql-and-drbd-often-say-no/index.html">MySQL and DRBD, Often say NO :) </a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_899 first active"><a href="index.html" rel="tag" title="" class="active">drbd</a></li>
<li class="taxonomy_term_449"><a href="../449/index.html" rel="tag" title="">ha</a></li>
<li class="taxonomy_term_458 last"><a href="../458/index.html" rel="tag" title="">mysql</a></li>
</ul></span>
        </div>
  <div class="content"><p><a href="http://fghaas.wordpress.com/2008/04/27/drbd-and-mysql-just-say-yes/" rel="nofollow">Florian</a> is replying to <a href="http://www.jebriggs.com/blog/mysql/drbd-and-mysql-just-say-no.html" rel="nofollow">James</a> on the subject of using DRBD for MySQL HA.   A discussion started earlier <a href="http://ebergen.net/wordpress/2007/04/02/drbd-in-the-real-world/" rel="nofollow">by Eric</a>  Florian is refuting most of the arguments that James has against using MySQL and DRBD together.</p>
<p>I`m also saying NO to MySQL and DRBD in most of the cases.. but not for any of the reasons James mentions.</p>
<p>I must say upfront I love DRBD and I have been  using it in production for a long time but not for MySQL HA.  </p>
<p>The problem with using MySQL on DRBD is the same problem you have when killing the power on a standalone MySQL machine and rebooting that machine.<br />
DRBD saves you the time of powering up your machine and OS.  But MySQL still needs to be started again on the standby machine.  (In limited cases you might have a lengthy startup process due to eg. Innodb consitency checks)   But for lots of organisations this (even limited) downtime is not acceptable.</p>
<p>Both MySQL Cluster and MultiMaster replication give you constant access to your data on more nodes .</p>
<p>For lots of shops, those not needing to scale, those that can live with a limited downtime, DRBD and MySQL  is a good match,   </p>
<p>But if you want to achieve real high availability as compared to less downtime.  or if you are looking to scale your MySQL and want to benefit from HA while you are at it , then MultiMaster is probably the preferred alternative as opposed to DRBD.</p>
<p>In the meanwhile I`ll be happy serving other data from my DRBD volumes ;)</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../../blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="../../../mysql-and-drbd-often-say-no/index.html#comments" title="Jump to the first comment of this posting.">1 comment</a></li>
</ul></div>
</div>
</div>
</div>

</div>

<div id="footer" class="footer">
  No really .. everything is a funky DNS problem , you'll realise I`m right pretty soon !   
  <p class="credits">Powered by <a href="http://www.drupal.org/">Drupal</a> and the <a href="http://www.drupal.org/project/barlow">Barlow</a> theme by <a href="http://egonbianchet.net/">Egon Bianchet</a>.</p>
</div>

</div>

</body>

<!-- Mirrored from 127.0.0.1:8080/blog/taxonomy/term/899 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Sep 2017 19:47:45 GMT -->
</html>

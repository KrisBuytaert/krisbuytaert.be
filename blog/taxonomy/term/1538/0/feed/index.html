<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xml:base="http://127.0.0.1:8080/blog"  xmlns:dc="http://purl.org/dc/elements/1.1/">
<channel>
 <title>Everything is a Freaking DNS problem - dsl</title>
 <link>http://127.0.0.1:8080/blog/taxonomy/term/1538/0</link>
 <description></description>
 <language>en</language>
<item>
 <title>Jenkins DSL and Heisenbugs</title>
 <link>http://127.0.0.1:8080/blog/jenkins-dsl-and-heisenbugs</link>
 <description>&lt;p&gt;I`m working on getting even more moving parts automated,  those who use Jenkins frequently probably also have  Love - Hate relationship with it. &lt;/p&gt;
&lt;p&gt;The love coming from the flexibility , stability and the power you get from it,  the hate from it&#039;s UI.   If you&#039;ve ever had to create a new Jenkins job or even pipeline based on one that already existed you&#039;ve gone trough the horror of click and paste errors , and you know where the hate breeds.&lt;/p&gt;
&lt;p&gt;We&#039;ve been trying to automate this with different levels of success,  we&#039;ve puppetized the XML jobs,  we&#039;ve used the  Buildflow Plugin (reusing the same job for different pipelines is a bad idea..)  We played with JJB running into issues with some plugins (Promoted Build)  and most recently we have put our hope in  the Job DSL. &lt;/p&gt;
&lt;p&gt;While toying with the DSL I ran into a couple of interresting behaviours.  Imagine you have an entry like this which is supposed to replace the $foldername with the content of the variable and actually take the correct upstream&lt;br /&gt;
&lt;div class=&quot;geshifilter&quot;&gt;&lt;pre class=&quot;text geshifilter-text&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;ol&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;cloneWorkspace(&#039;${foldername}/dashing-dashboard-test&#039;, &#039;Successful&#039;)&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;You generate the job, look inside the Jenkins UI to verify what the build result was .. save the job and run it .. success ..&lt;br /&gt;
Then a couple of times later that same job gives an error ... It can&#039;t find the upstream job  to copy the workspace from. You once again open up the job in the UI, look at it .. save it , run it again and then it works.. a typical case of  Heisenbug .. &lt;/p&gt;
&lt;p&gt;When you start looking closer to the XML of the job you notice ..&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;geshifilter&quot;&gt;&lt;pre class=&quot;text geshifilter-text&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;ol&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;&amp;lt;parentJobName&amp;gt;${foldername}/dashing-dashboard-test&amp;lt;/parentJobName&amp;gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;obviously wrong .. I should have used double quotes ..&lt;/p&gt;
&lt;p&gt;But why doesn&#039;t it look wrong in the UI ?  That&#039;s because the UI autoselects the first option from it&#039;s autogenerated pull down list ..  Which actually contains the right upstream workplace I wanted to trigger (that will teach me to use 00 as a prefix for the  foldername  for all my tests..)&lt;/p&gt;
&lt;p&gt;So when working with the DSL .. review the generated XML .. not just if the job works ..&lt;/p&gt;
</description>
 <comments>http://127.0.0.1:8080/blog/jenkins-dsl-and-heisenbugs#comments</comments>
 <category domain="http://127.0.0.1:8080/blog/category/automate">automate</category>
 <category domain="http://127.0.0.1:8080/blog/category/devops">devops</category>
 <category domain="http://127.0.0.1:8080/blog/category/dsl">dsl</category>
 <category domain="http://127.0.0.1:8080/blog/category/inception">inception</category>
 <category domain="http://127.0.0.1:8080/blog/category/jenkins">jenkins</category>
 <pubDate>Mon, 13 Jun 2016 19:04:03 +0000</pubDate>
 <dc:creator>Kris Buytaert</dc:creator>
 <guid isPermaLink="false">1111 at http://127.0.0.1:8080/blog</guid>
</item>
</channel>
</rss>

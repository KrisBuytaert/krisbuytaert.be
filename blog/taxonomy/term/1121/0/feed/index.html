<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xml:base="http://127.0.0.1:8080/blog"  xmlns:dc="http://purl.org/dc/elements/1.1/">
<channel>
 <title>Everything is a Freaking DNS problem - cck</title>
 <link>http://127.0.0.1:8080/blog/taxonomy/term/1121/0</link>
 <description></description>
 <language>en</language>
<item>
 <title>CCK &amp; Views, My First Experiences </title>
 <link>http://127.0.0.1:8080/blog/cck-views-my-first-experiences</link>
 <description>&lt;p&gt;and probably my last one .. &lt;/p&gt;
&lt;p&gt;I &lt;a href=&quot;http://www.krisbuytaert.be/blog/migrate-multisite-and-restyle&quot;&gt;mentioned &lt;/a&gt; a couple of weeks ago that I was looking into a way of converting my static page with published papers, articles and presentations in a more dynamic page where I could create RSS feeds from the updates and feed them into &lt;a href=&quot;http://www.inuits.be/&quot;&gt;another site&lt;/a&gt; for everybody to use.&lt;/p&gt;
&lt;p&gt;Some people suggested that I&#039;d have a look at CCK &amp;amp; Views for this. While up till now when creating an app I had usually written my own Drupal module with my own database schema and manually written  SQL Queries.  This indeed looked like  the perfect opportunity to dig into the CCK and Views thingie.&lt;/p&gt;
&lt;p&gt;Now I must admit that &lt;a href=&quot;http://www.krisbuytaert.be/pics/hybernate.jpg&quot;&gt;I`m not really fond&lt;/a&gt; of &quot;generated queries&quot;&lt;/p&gt;
&lt;p&gt;I&#039;ve had nightmares before when having to debug 2Mb Hibernate queries that could be reduced  to a single select value from table where query but Hibernate used a zillion join on tables I didn&#039;t need.&lt;br /&gt;
So I was a bit afraid of what Views would do ..&lt;/p&gt;
&lt;p&gt;So here&#039;s what happened, I created 2 pages ..  presentations. and publications.  Personally I&#039;d go for 1 table each with some smart indexes and then the only thing you want is   SELECT  * FROM table ORDER BY  date&lt;/p&gt;
&lt;p&gt;Now if I&#039;d create a special content type for this I probably get some more benefits.&lt;br /&gt;
And I could get the data from the tables with a rather simple query like this :&lt;br /&gt;
&lt;div class=&quot;geshifilter&quot;&gt;&lt;pre class=&quot;text geshifilter-text&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;ol&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;SELECT  node.nid,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        content_type_presentation.field_datum_value,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        content_type_presentation.field_location_value,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        content_type_presentation.field_country_value  ,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        content_type_presentation.field_event_link_title,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;        content_type_presentation.field_event_link_url&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt; FRON content_type_presentation, node&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt; WHERE node.type=&amp;quot;presentation&amp;quot; AND node.nid = content_type_presentation.nid&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt; ORDER BY  content_type_presentation.field_datum_value desc;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;However when using Views , this is what is being created. &lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;geshifilter&quot;&gt;&lt;pre class=&quot;text geshifilter-text&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;ol&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;SELECT DISTINCT(node.nid) AS nid,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   node_data_field_country.field_datum_value AS node_data_field_country_field_datum_value,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   node_data_field_country.nid AS node_data_field_country_nid,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   node.type AS node_type,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   node_data_field_country.field_event_link_url AS node_data_field_country_field_event_link_url,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   node_data_field_country.field_event_link_title AS node_data_field_country_field_event_link_title,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   node_data_field_country.field_event_link_attributes AS node_data_field_country_field_event_link_attributes,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   node_data_field_country.field_location_value AS node_data_field_country_field_location_value,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   node_data_field_country.field_country_value AS node_data_field_country_field_country_value,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   node_data_field_link.field_link_url AS node_data_field_link_field_link_url,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   node_data_field_link.field_link_title AS node_data_field_link_field_link_title,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   node_data_field_link.field_link_attributes AS node_data_field_link_field_link_attributes,&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   node_data_field_link.nid AS node_data_field_link_nid&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt; FROM node node&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt; LEFT JOIN content_type_presentation node_data_field_country ON node.vid = node_data_field_country.vid&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt; LEFT JOIN content_field_link node_data_field_link ON node.vid = node_data_field_link.vid&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt; WHERE UPPER(node_data_field_country.field_country_value) != UPPER(&#039;&#039;)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;   ORDER BY node_data_field_country_field_datum_value DESC&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;So there&#039;s some joins, a zillion more fields that I don&#039;t really need being fetched from my database.&lt;br /&gt;
The explain also tells me some interesting things.. like the Using temporary AND Using Filesort&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;geshifilter&quot;&gt;&lt;pre class=&quot;text geshifilter-text&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;ol&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;| id | select_type | table                   | type   | possible_keys | key     | key_len | ref                                       | rows | Extra                                        |&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;+----+-------------+-------------------------+--------+---------------+---------+---------+-------------------------------------------+------+----------------------------------------------+&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;|  1 | SIMPLE      | node_data_field_country | ALL    | PRIMARY       | NULL    | NULL    | NULL                                      |   33 | Using where; Using temporary; Using filesort |&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;|  1 | SIMPLE      | node                    | eq_ref |vid           | vid     | 4       |buytaert_blog.node_data_field_country.vid |    1 |                                              |&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;|  1 | SIMPLE      | node_data_field_link    | eq_ref | PRIMARY       | PRIMARY | 4       | buytaert_blog.node.vid                    |    1 |                                              |&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;+----+-------------+-------------------------+--------+---------------+---------+---------+-------------------------------------------+------+----------------------------------------------+&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;Now my simpler query uses the same amount of rows to return the result but doesn&#039;t build a temporary table.&lt;br /&gt;
&lt;div class=&quot;geshifilter&quot;&gt;&lt;pre class=&quot;text geshifilter-text&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;ol&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;+----+-------------+---------------------------+------+-----------------------+------+---------+---------------------------------------------+------+----------------+&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;| id | select_type | table                     | type | possible_keys         | key  | key_len | ref                                         | rows | Extra          |&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;+----+-------------+---------------------------+------+-----------------------+------+---------+---------------------------------------------+------+----------------+&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;|  1 | SIMPLE      | content_type_presentation | ALL  | nid                   | NULL | NULL    | NULL                                        |   33 | Using filesort |&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;|  1 | SIMPLE      | node                      | ref  | PRIMARY,node_type,nid | nid  | 4       | buytaert_blog.content_type_presentation.nid |    1 | Using where    |&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;font-family: monospace; font-weight: normal;&quot;&gt;&lt;div style=&quot;font-family: monospace; font-weight: normal; font-style: normal&quot;&gt;+----+-------------+---------------------------+------+-----------------------+------+---------+---------------------------------------------+------+----------------+&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;In this small example there isn&#039;t much  difference in performance to be noticed, but with bigger tables you will see other results. However I still prefer my personal query approach.&lt;/p&gt;
&lt;p&gt;The other thing that bugs me is the excessive use of aliases.  The MySQL internal experts can shed a light on the performance impact of using them, but if you are running queries remotely you at least have an increase in bandwidth usage.  Not a problem now,  but who knows later when you are big and famous :)&lt;/p&gt;
&lt;p&gt;Now Drupal seems to do it pretty ok .. it&#039;s aliasing table.field to table_field which still makes sense.  Not unlike some other tools that alias table.field to dynamically_generated_unreproducable_unreadable_key_word_with_no_relevant_meaning , try debugging that for a change.   And yes I see valuable use for resultset aliasing, but I also se it is often overused.&lt;/p&gt;
&lt;p&gt;But the short summary ... given my background  I prefer writing the module and crafting my own queries over having Views create&lt;br /&gt;
a query for me.&lt;/p&gt;
</description>
 <comments>http://127.0.0.1:8080/blog/cck-views-my-first-experiences#comments</comments>
 <category domain="http://127.0.0.1:8080/blog/category/cck">cck</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/484">drupal</category>
 <category domain="http://127.0.0.1:8080/blog/taxonomy/term/458">mysql</category>
 <category domain="http://127.0.0.1:8080/blog/category/views">views</category>
 <pubDate>Sun, 07 Dec 2008 21:44:10 +0000</pubDate>
 <dc:creator>Kris Buytaert</dc:creator>
 <guid isPermaLink="false">838 at http://127.0.0.1:8080/blog</guid>
</item>
</channel>
</rss>
